<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RicRios Innovation Lab</title>
    <meta name="description" content="Executive Director of Product Design - Strategic leadership through cyberpunk brutalist design systems">
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX', {
            anonymize_ip: true,
            cookie_flags: 'SameSite=None;Secure'
        });
    </script>
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="RicRios Innovation Lab - Applied Design Leadership">
    <meta property="og:description" content="Executive Director of Product Design - Strategic leadership through cyberpunk brutalist design systems">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ricrios11.github.io/time-aware-design-leadership-portfolio/">
    <meta property="og:image" content="https://ricrios11.github.io/time-aware-design-leadership-portfolio/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="RicRios Innovation Lab">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="RicRios Innovation Lab - Applied Design Leadership">
    <meta name="twitter:description" content="Executive Director of Product Design - Strategic leadership through cyberpunk brutalist design systems">
    <meta name="twitter:image" content="https://ricrios11.github.io/time-aware-design-leadership-portfolio/og-image.png">
    <meta name="twitter:creator" content="@ricrios">
    
    <!-- Structured Data - JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ricardo Rios",
        "jobTitle": "Executive Director of Product Design",
        "description": "Strategic leadership through cyberpunk brutalist design systems",
        "url": "https://ricrios11.github.io/time-aware-design-leadership-portfolio/",
        "image": "https://ricrios11.github.io/time-aware-design-leadership-portfolio/og-image.png",
        "sameAs": [
            "https://www.linkedin.com/in/ricrios",
            "https://www.instagram.com/ricrios"
        ],
        "knowsAbout": [
            "Product Design",
            "Design Leadership",
            "Innovation Strategy",
            "Design Systems",
            "User Experience"
        ],
        "worksFor": {
            "@type": "Organization",
            "name": "RicRios Innovation Lab"
        }

        function initDiagnosticsPanel() {
            const timeStatus = document.getElementById('time-status');
            const systemChip = document.getElementById('system-chip');
            const diagnosticsPanel = document.getElementById('system-diagnostics');
            if (!timeStatus || !systemChip || !diagnosticsPanel) return;

            const setVisibility = (visible) => {
                timeStatus.classList.toggle('show-diagnostics', visible);
                systemChip.setAttribute('aria-expanded', visible ? 'true' : 'false');
            };

            systemChip.addEventListener('mouseenter', () => setVisibility(true));
            systemChip.addEventListener('focus', () => setVisibility(true));
            systemChip.addEventListener('click', () => {
                const nextState = !timeStatus.classList.contains('show-diagnostics');
                setVisibility(nextState);
            });
            timeStatus.addEventListener('mouseleave', () => setVisibility(false));
            systemChip.addEventListener('blur', () => {
                setTimeout(() => {
                    if (!timeStatus.matches(':hover')) {
                        setVisibility(false);
                    }
                }, 80);
            });
            systemChip.addEventListener('keydown', (event) => {
                if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault();
                    const isOpen = timeStatus.classList.toggle('show-diagnostics');
                    systemChip.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
                }
            });
        }

        function startFPSCounter() {
            const fpsElement = document.getElementById('diagnostic-fps');
            if (!fpsElement) return;
            let lastFrame = performance.now();
            let frames = 0;

            function measure(now) {
                frames += 1;
                if (now - lastFrame >= 500) {
                    const fps = Math.max(1, Math.round((frames * 1000) / (now - lastFrame)));
                    fpsElement.textContent = `${fps} fps`;
                    frames = 0;
                    lastFrame = now;
                }
                requestAnimationFrame(measure);
            }

            requestAnimationFrame(measure);
        }

        function initNavigationTracker() {
            const navItems = Array.from(document.querySelectorAll('.nav-item[data-section]'));
            if (!navItems.length) return;

            const sectionMap = new Map();
            navItems.forEach((item) => {
                const sectionId = item.dataset.section;
                const section = document.getElementById(sectionId);
                if (!section) return;
                sectionMap.set(sectionId, { section, item });
                item.addEventListener('click', () => scrollToSection(sectionId));
            });

            const setActiveNav = (sectionId) => {
                navItems.forEach((item) => {
                    const isActive = item.dataset.section === sectionId;
                    item.classList.toggle('active', isActive);
                    item.setAttribute('aria-current', isActive ? 'true' : 'false');
                });
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        setActiveNav(entry.target.id);
                    }
                });
            }, {
                threshold: 0.35,
                rootMargin: '-20% 0px -40% 0px'
            });

            sectionMap.forEach(({ section }) => observer.observe(section));
            // Default active section
            const firstSection = navItems[0]?.dataset.section;
            if (firstSection) {
                setActiveNav(firstSection);
            }
        }

        function initLabFilters() {
            const filterButtons = Array.from(document.querySelectorAll('.lab-filter[data-filter]'));
            const cards = Array.from(document.querySelectorAll('.playground-games .game-card'));
            if (!filterButtons.length || !cards.length) return;

            const setFilter = (filter) => {
                filterButtons.forEach((button) => {
                    const isActive = button.dataset.filter === filter;
                    button.classList.toggle('active', isActive);
                    button.setAttribute('aria-pressed', String(isActive));
                });

                cards.forEach((card) => {
                    const category = card.dataset.category || 'games';
                    const hidden = filter !== 'all' && category !== filter;
                    card.hidden = hidden;
                });
            };

            filterButtons.forEach((button) => {
                button.addEventListener('click', () => {
                    setFilter(button.dataset.filter);
                });
            });

            setFilter('all');
        }
    }
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <!-- Favicon Suite - ASCII RR Branding - Cache Busted -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg?v=2">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png?v=2">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png?v=2">
    <link rel="shortcut icon" href="favicon.ico?v=2">
    
    <!-- Apple Touch Icons - Cache Busted -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png?v=2">
    <link rel="apple-touch-icon" sizes="152x152" href="apple-touch-icon.png?v=2">
    <link rel="apple-touch-icon" sizes="144x144" href="apple-touch-icon.png?v=2">
    <link rel="apple-touch-icon" sizes="120x120" href="apple-touch-icon.png?v=2">
    <link rel="apple-touch-icon" sizes="114x114" href="apple-touch-icon.png?v=2">
    <link rel="apple-touch-icon" sizes="76x76" href="apple-touch-icon.png?v=2">
    <link rel="apple-touch-icon" sizes="72x72" href="apple-touch-icon.png?v=2">
    <link rel="apple-touch-icon" sizes="60x60" href="apple-touch-icon.png?v=2">
    <link rel="apple-touch-icon" sizes="57x57" href="apple-touch-icon.png?v=2">
    
    <!-- Android Chrome Icons - Cache Busted -->
    <link rel="icon" type="image/png" sizes="192x192" href="favicon-192x192.png?v=2">
    <link rel="icon" type="image/png" sizes="512x512" href="favicon-512x512.png?v=2">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="site.webmanifest">
    <meta name="theme-color" content="#00ff9d">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="RicRios">
    
    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileColor" content="#0a0a0a">
    <meta name="msapplication-TileImage" content="favicon-144x144.png">
    <meta name="msapplication-config" content="browserconfig.xml">
    <link rel="stylesheet" href="css/innovation-lab-features.css">
    <link rel="stylesheet" href="css/agentx-themes.css">
    <link rel="stylesheet" href="css/time-gradients.css">
    <link rel="stylesheet" href="css/agentx-narrator.css">
    <link rel="stylesheet" href="css/cyber-game-engine.css">
    <link rel="stylesheet" href="css/core-layout.css">
    <link rel="stylesheet" href="css/modal-states.css">
    <link rel="stylesheet" href="css/game-layer.css">
    <link rel="stylesheet" href="css/community-wall.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&family=Exo+2:wght@100;200;300;400;500;600;700;800;900&family=Space+Mono:wght@400;700&family=Audiowide&display=swap" rel="stylesheet">
    
</head>
<body data-cyber-theme="afternoon" data-theme="dark">
    <!-- SKIM LAYER: Hero with ASCII Brutalism -->
    <section class="hero-skim" id="hero-section">
        <div class="ascii-arena">
            <div class="ascii-monogram" id="ascii-rr" onclick="handleMonogramClick()" style="cursor: pointer;">
                <pre class="ascii-art-hero" id="ascii-rr-art"
                    data-variant-0="â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— &#10;â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—&#10;â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•&#10;â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—&#10;â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘&#10;â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•"
                    data-variant-1="â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ&#10;â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ&#10;â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ&#10;â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ&#10;â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ&#10;â–ˆâ–ˆ      â–ˆâ–ˆ    "
                    data-variant-2="â•”â•â•â•â•â•â•— â•”â•â•â•â•â•â•—&#10;â•‘ â–ˆâ–ˆ  â•‘ â•‘ â–ˆâ–ˆ  â•‘&#10;â•‘ â–ˆâ–ˆâ–ˆâ–ˆâ•‘ â•‘ â–ˆâ–ˆâ–ˆâ–ˆâ•‘&#10;â•‘ â–ˆâ–ˆ  â•‘ â•‘ â–ˆâ–ˆ  â•‘&#10;â•‘ â–ˆâ–ˆ  â•‘ â•‘ â–ˆâ–ˆ  â•‘&#10;â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•"
                    data-variant-3="â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”&#10;â”‚ â–ˆâ–ˆâ–ˆ â”‚ â”‚ â–ˆâ–ˆâ–ˆ â”‚&#10;â”‚ â–ˆâ–ˆâ–ˆ â”‚ â”‚ â–ˆâ–ˆâ–ˆ â”‚&#10;â”‚ â–ˆ â–ˆ â”‚ â”‚ â–ˆ â–ˆ â”‚&#10;â”‚ â–ˆ â–ˆ â”‚ â”‚ â–ˆ â–ˆ â”‚&#10;â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜"
                    data-click-count="0">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•</pre><span class="terminal-cursor"></span>
            </div>
        </div>
        
        <div class="time-status" id="time-status">
            <button class="system-chip" type="button" id="system-chip" aria-haspopup="true" aria-expanded="false" aria-controls="system-diagnostics">
                <span class="chip-label">SYSTEM</span>
                <span class="chip-value">Live diagnostics</span>
            </button>
            <div class="time-chip">
                <span class="chip-label">TIME</span>
                <span class="chip-value"><span id="current-time">--:--</span> â€¢ <span id="time-mode">Night mode active</span></span>
            </div>
            <div class="system-diagnostics" id="system-diagnostics" role="status" aria-live="polite">
                <dl>
                    <div class="diag-row">
                        <dt>Theme</dt>
                        <dd id="diagnostic-theme">Deep Scan</dd>
                    </div>
                    <div class="diag-row">
                        <dt>Mode</dt>
                        <dd id="diagnostic-mode">Night mode active</dd>
                    </div>
                    <div class="diag-row">
                        <dt>Render</dt>
                        <dd id="diagnostic-fps">60 fps</dd>
                    </div>
                    <div class="diag-row">
                        <dt>Seed</dt>
                        <dd id="diagnostic-seed">--</dd>
                    </div>
                </dl>
            </div>
        </div>
        
        <!-- Persistent ASCII Navigation -->
        <nav class="ascii-nav" id="ascii-nav" aria-label="Primary navigation">
            <div class="nav-container">
                <button class="nav-item" type="button" data-section="hero-section">HOME</button>
                <button class="nav-item" type="button" data-section="case-studies-grid">CASE STUDIES</button>
                <button class="nav-item" type="button" data-section="innovation-lab" data-active-label=" â€¢ ACTIVE">INNOVATION LAB</button>
                <button class="nav-item" type="button" data-section="footer">CONNECT</button>
            </div>
        </nav>
    </section>
    
    <!-- Theme Toggle - Dedicated positioning -->
    <button class="theme-toggle" id="theme-toggle" type="button" onclick="toggleTheme()" aria-pressed="false">
        <span class="theme-label">Theme: <span id="theme-state-label">Dark</span></span>
        <span class="theme-icon" aria-hidden="true">â—</span>
    </button>
    
    <div class="portfolio-container">
        <!-- Innovation Lab Section -->
        <section class="playground-section" id="innovation-lab" aria-labelledby="innovation-lab-heading">
            <div class="playground-header">
                <div class="lab-title">
                    <h2 id="innovation-lab-heading">
                        <span class="status-dot" aria-hidden="true"></span>
                        <span class="lab-title-text">Innovation Lab</span>
                        <span class="lab-title-status" role="status" aria-live="polite">â€¢ live</span>
                    </h2>
                </div>
                <div class="lab-filter-group" role="group" aria-labelledby="lab-filter-label">
                    <span class="filter-label" id="lab-filter-label">Filters:</span>
                    <p class="sr-only" id="lab-filter-help">Toggle a filter to view only games, only art, or every lab experiment.</p>
                    <div class="lab-filters" aria-describedby="lab-filter-help">
                        <button class="lab-filter" type="button" data-filter="games" aria-pressed="false" aria-controls="lab-experiences">
                            Games <span class="filter-count" id="lab-count-games">(2)</span>
                        </button>
                        <button class="lab-filter" type="button" data-filter="art" aria-pressed="false" aria-controls="lab-experiences">
                            Art <span class="filter-count" id="lab-count-art">(3)</span>
                        </button>
                        <button class="lab-filter active" type="button" data-filter="all" aria-pressed="true" aria-controls="lab-experiences">
                            All <span class="filter-count" id="lab-count-all">(5)</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="playground-games" id="lab-experiences">
                    <div class="game-card hoverable" data-category="games" data-game-card="snake" data-tooltip="Trojan Horse Layer 1: Game mechanics teach design principles - precision timing, strategic positioning, flow state achievement" role="button" tabindex="0" aria-label="Launch Snake" onclick="openSnakeLabModal();" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();openSnakeLabModal();}">
                        <h3 class="game-title ascii-game-title">
â”Œâ”€ ğŸ SNAKE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  make risk feel fun          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        </h3>
                    <div class="game-metrics">
                        <span class="metric hoverable" data-tooltip="Ease into the grid, ride momentum, and keep the run alive.">â”œâ”€ Drift mode</span>
                        <span class="metric hoverable" data-tooltip="Edge snapping lets you bend near misses into power plays.">â”œâ”€ Edge snapping</span>
                        <span class="metric hoverable" data-tooltip="Stack risks fast enough and the score multiplier wakes up.">â””â”€ Score multipliers</span>
                    </div>
                    <div class="game-card-actions">
                        <button class="game-cta primary" type="button" data-action="start-snake-run" onclick="openSnakeLabModal();">
                            Start a run
                        </button>
                    </div>
                    <div class="game-footer">
                        <span class="ascii-micro">â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“</span>
                    </div>
                </div>
                
                <div class="game-card hoverable" data-category="art" data-game-card="slap" data-tooltip="Trojan Horse Layer 2: Creative expression validates Lyra discourse system - multi-threaded community dynamics at scale" role="button" tabindex="0" aria-label="Launch SLAP" onclick="openSlapLabModal();" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();openSlapLabModal();}">
                    <h3 class="game-title ascii-game-title">
â”Œâ”€ ğŸ’¥ SLAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  vandalize the grid (politely)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </h3>
                    <div class="game-metrics">
                        <span class="metric hoverable" data-tooltip="Argue with ASCII. Debate friends directly on the wall.">â”œâ”€ Debate</span>
                        <span class="metric hoverable" data-tooltip="Make stickers, tags, and signatures with fast presets.">â”œâ”€ Make</span>
                        <span class="metric hoverable" data-tooltip="Remix anything on the wall with SLAP::codes.">â””â”€ Remix</span>
                    </div>
                    <div class="game-card-actions">
                        <button class="game-cta primary" type="button" data-action="open-slap-creator" onclick="openSlapLabModal();">
                            Open creator
                        </button>
                    </div>
                    <p class="game-card-note">Drafts save locally. Export when you're ready to ship.</p>
                    <div class="game-footer">
                        <span class="ascii-micro">â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘</span>
                    </div>
                </div>
            </div>
            
            <div id="game-container" style="margin-top: 2rem;"></div>
            
            <!-- Community Wall (temporarily disabled for v0.5) -->
            <!--
            <section class="community-art-section" id="community-art-section" aria-live="polite" data-wall-section style="margin-top: 3rem; display: none;">
                ...
            </section>
            -->
        </section>

        <section class="lab-log-console" id="lab-log-console" aria-label="System log console">
            <div class="lab-log-header">
                <span class="lab-log-title">Lab log â€¢ IntegrationOS</span>
                <span class="lab-log-status" id="lab-log-status">Bootingâ€¦</span>
            </div>
            <ul class="lab-log-feed" id="lab-log-feed" aria-live="polite" aria-atomic="false"></ul>
        </section>

        <!-- SKIM LAYER: Case Studies Grid -->
        <section class="case-studies-grid" id="case-studies-grid">
            <!-- Chase Travel Case Study -->
            <article class="case-card" onclick="openDip('chase-travel')" title="15-person design team orchestrating 24 scrum teams â€” rejumble the pieces philosophy">
                <div class="case-impact ascii-impact"><span title="Forbes Advisor: overview of Chase Travel portal">$30B</span> â–“â–“â–“â–“â–“â–“â–“</div>
                <h2 class="case-title">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CHASE TRAVEL: CONNECTED   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</h2>
                <div class="case-microcopy">
                    <small><span style="color: var(--cyber-primary-accent); font-weight: bold;">Challenge:</span> Transform transactional travel site into experiential platform capable of expressing customer benefits at scale.</small>
                </div>
                <div class="case-microcopy">
                    <small><span style="color: var(--cyber-primary-accent); font-weight: bold;">Impact:</span> $30B portfolio growth through strategic positioning and cross-functional team leadership.</small>
                </div>
                <div class="case-footer">
                    <span class="ascii-micro">â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“</span>
                </div>
            </article>
            
            <!-- Chase Dining Case Study -->
            <article class="case-card" onclick="openDip('chase-dining')" title="Infatuation + OpenTable intersection â€” building team to shape our own destiny">
                <div class="case-impact ascii-impact"><span title="Coverage of reserved/curated access via dining program">$8B</span> â–“â–“â–“â–“â–“</div>
                <h2 class="case-title">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CHASE DINING: PREMIUM   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</h2>
                <div class="case-microcopy">
                    <small><span style="color: var(--cyber-primary-accent); font-weight: bold;">Challenge:</span> Create sustainable competitive advantage in premium credit card market.</small>
                </div>
                <div class="case-microcopy">
                    <small><span style="color: var(--cyber-primary-accent); font-weight: bold;">Impact:</span> $8B portfolio expansion through strategic dining partnerships and experience design.</small>
                </div>
                <div class="case-footer">
                    <span class="ascii-micro">â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘</span>
                </div>
            </article>
            
            <!-- Meta Case Study: Creative Partnership -->
            <article class="case-card" onclick="openDip('prompt-first')" title="Passion project to thought leadership â€” I like to make stuff, pushing cutting edge limits">
                <div class="case-impact ascii-impact"><span title="Internal repo count across Windsurf + GitHub">3.5K+</span> â–“â–“â–“â–“â–“â–“â–“â–“</div>
                <h2 class="case-title">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROMPT-FIRST INNOVATION   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</h2>
                <div class="case-microcopy">
                    <small><span style="color: var(--cyber-primary-accent); font-weight: bold;">Challenge:</span> Demonstrate executive-level strategic thinking through AI-human creative partnership.</small>
                </div>
                <div class="case-microcopy">
                    <small><span style="color: var(--cyber-primary-accent); font-weight: bold;">Impact:</span> This portfolio showcases systematic design innovation and agent orchestration frameworks.</small>
                </div>
                <div class="case-footer">
                    <span class="ascii-micro">â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’</span>
                </div>
            </article>
        </section>
    </main>

    <!-- Footer -->
    <footer id="footer" class="cyber-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>NAV</h3>
                <ul class="footer-links">
                    <li><a href="#" onclick="scrollToSection('hero-section'); return false;">Home</a></li>
                    <li><a href="#" onclick="scrollToSection('case-studies-grid'); return false;">Case Studies</a></li>
                    <li><a href="#" onclick="scrollToSection('innovation-lab'); return false;">Innovation Lab</a></li>
                    <li><a href="#" onclick="scrollToSection('footer'); return false;">Connect</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>EXPERIMENTS</h3>
                <ul class="footer-links">
                    <li><a href="#" onclick="event.preventDefault(); openSnakeLabModal();">Start Snake</a></li>
                    <li><a href="#" onclick="event.preventDefault(); openSlapLabModal();">Open SLAP</a></li>
                    <li><a href="#" onclick="openDip('prompt-first'); return false;">Prompt-First</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>CONNECT</h3>
                <div class="social-links">
                    <a href="https://linkedin.com/in/itsricrios" target="_blank" rel="noopener noreferrer" class="social-link">
                        ğŸ’¼ LinkedIn
                    </a>
                    <a href="https://instagram.com/itsricrios" target="_blank" rel="noopener noreferrer" class="social-link">
                        ğŸ“¸ Instagram
                    </a>
                    <a href="generate-social-images.html" target="_blank" rel="noopener noreferrer" class="social-link">
                        ğŸ¨ Media Generator
                    </a>
                </div>
                <p style="color: var(--cyber-medium-gray); font-size: 0.8rem; margin-top: 1rem; line-height: 1.4;">
                    Design â€¢ Play â€¢ Assets
                </p>
            </div>
            
            <div class="footer-ascii">
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      RIC RIOS â€¢ EXECUTIVE DESIGN                      â•‘
â•‘                      CYBERPUNK BRUTALISM SYSTEM                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </div>
        </div>
    </footer>
    
    <!-- DIP LAYER: Enhanced Case Study Overlays -->
    <div id="dip-overlay" class="dip-overlay">
        <div class="dip-content">
            <button class="dip-close" onclick="closeDip()">Ã—</button>
            <div id="dip-content-area"></div>
        </div>
    </div>

    <!-- Snake Game Modal -->
    <div id="snake-modal" class="game-modal" style="display: none;">
        <div class="modal-content game-modal-content">
            <div class="game-modal-header refined-header">
                <h2 class="modal-title" role="heading" aria-level="2">â”Œâ”€ SNAKE PROTOCOL â”€â”</h2>
                <button class="game-modal-close" onclick="closeGameModal('snake-modal')" aria-label="Close Snake Game">Ã—</button>
            </div>
            <div class="game-modal-body refined-body">
                <div class="snake-game-container" role="main" aria-label="Snake Game Interface" data-snake-root>
                    <div class="snake-modal-layout">
                        <div class="snake-header-grid">
                            <div class="game-stats refined-stats snake-stats-grid" role="status" aria-live="polite">
                                <div class="stat-item">
                                    <span class="stat-label">SCORE</span>
                                    <span class="stat-value" id="snake-score" data-snake-score aria-label="Current score">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">LEVEL</span>
                                    <span class="stat-value" id="snake-level" data-snake-level aria-label="Current level">1</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">STATUS</span>
                                    <span class="stat-value" id="snake-status" data-snake-status aria-label="Game status">READY</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">HIGH SCORE</span>
                                    <span class="stat-value" id="snake-high-score" data-snake-high-score aria-label="Highest score">0</span>
                                </div>
                            </div>
                        <div class="snake-cta-row">
                            <button id="snake-start" data-snake-start class="game-btn primary-action snake-start-btn" aria-label="Start Snake Game">ğŸ START RUN</button>
                        </div>
                        </div>
                    </div>

                    <div class="snake-leaderboard" data-snake-leaderboard>
                        <h4>Arcade Leaderboard</h4>
                        <p class="snake-leaderboard-empty">No runs yet. Steal the top spot in under 30 seconds.</p>
                    </div>
                    
                    <div class="snake-game-area">
                        <div class="snake-board-wrapper">
                            <div class="game-board refined-board snake-board" id="snake-board" role="application" aria-label="Snake Game Board" tabindex="0"></div>
                        </div>
                    </div>
                    
                    <!-- Controls -->
                    <details class="snake-controls-panel" data-auto-open-once>
                        <summary>
                            <span>Controls</span>
                            <span class="control-hint">Keyboard + touch ready</span>
                        </summary>
                        <div class="control-content">
                            <div class="control-column">
                                <p class="control-title">Keyboard</p>
                                <ul class="control-list">
                                    <li><strong>Arrow keys / WASD</strong> â€” steer</li>
                                    <li><strong>Enter</strong> â€” start / pause</li>
                                    <li><strong>Space</strong> â€” boost drift</li>
                                </ul>
                            </div>
                            <div class="control-column">
                                <p class="control-title">Touch</p>
                                <div class="touch-controls mobile-touch-controls" id="snake-touch-controls">
                                    <div class="touch-instructions">Tap arrows or swipe the board.</div>
                                    <div class="touch-grid">
                                        <div class="touch-row">
                                            <button class="touch-btn" id="snake-up" aria-label="Move Up">â†‘</button>
                                        </div>
                                        <div class="touch-row touch-row-middle">
                                            <button class="touch-btn" id="snake-left" aria-label="Move Left">â†</button>
                                            <button class="touch-btn" id="snake-down" aria-label="Move Down">â†“</button>
                                            <button class="touch-btn" id="snake-right" aria-label="Move Right">â†’</button>
                                        </div>
                                        <div class="touch-row">
                                            <button class="touch-btn boost-btn" id="snake-boost" aria-label="Speed Boost">âš¡ BOOST</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </details>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- Graffiti Slap Modal -->
    <div id="graffiti-modal" class="game-modal" style="display: none;">
        <div class="modal-content game-modal-content">
            <div class="game-modal-header refined-header">
                <h2 class="modal-title" role="heading" aria-level="2">â”Œâ”€ GRAFFITI SLAP CREATOR â”€â”</h2>
                <button class="game-modal-close" onclick="closeGameModal('graffiti-modal')" aria-label="Close Graffiti Creator Modal">Ã—</button>
            </div>
            <div class="game-modal-body refined-body">
                <div class="slap-modal-layout" data-slap-root role="main" aria-label="ASCII SLAP creator">
                    <section class="slap-toolbar" aria-label="Drawing controls">
                        <div class="slap-tool-group">
                            <p class="slap-tool-label">Colors</p>
                            <div class="slap-chip-row">
                                <button type="button" class="slap-color active" data-color="#FF3B30" style="--swatch:#FF3B30" aria-label="Red swatch"></button>
                                <button type="button" class="slap-color" data-color="#FF9500" style="--swatch:#FF9500" aria-label="Orange swatch"></button>
                                <button type="button" class="slap-color" data-color="#FFCC00" style="--swatch:#FFCC00" aria-label="Yellow swatch"></button>
                                <button type="button" class="slap-color" data-color="#34C759" style="--swatch:#34C759" aria-label="Green swatch"></button>
                                <button type="button" class="slap-color" data-color="#007AFF" style="--swatch:#007AFF" aria-label="Blue swatch"></button>
                                <button type="button" class="slap-color" data-color="#5856D6" style="--swatch:#5856D6" aria-label="Purple swatch"></button>
                                <button type="button" class="slap-color" data-color="#FF2D92" style="--swatch:#FF2D92" aria-label="Pink swatch"></button>
                                <button type="button" class="slap-color" data-color="#FFFFFF" style="--swatch:#FFFFFF" aria-label="White swatch"></button>
                            </div>
                        </div>
                        <div class="slap-tool-group">
                            <p class="slap-tool-label">ASCII glyphs</p>
                            <div class="slap-chip-row">
                                <button type="button" class="slap-glyph active" data-char="â–ˆ">â–ˆ</button>
                                <button type="button" class="slap-glyph" data-char="â–“">â–“</button>
                                <button type="button" class="slap-glyph" data-char="â–’">â–’</button>
                                <button type="button" class="slap-glyph" data-char="â–‘">â–‘</button>
                                <button type="button" class="slap-glyph" data-char="#">#</button>
                                <button type="button" class="slap-glyph" data-char="@">@</button>
                                <button type="button" class="slap-glyph" data-char="/">/</button>
                                <button type="button" class="slap-glyph" data-char="\\">\\</button>
                                <button type="button" class="slap-glyph" data-char="*">*</button>
                                <button type="button" class="slap-glyph" data-char="+">+</button>
                            </div>
                        </div>
                        <div class="slap-tool-group">
                            <p class="slap-tool-label">Brush</p>
                            <div class="slap-chip-row">
                                <button type="button" class="slap-brush active" data-brush="1">1Ã—1</button>
                                <button type="button" class="slap-brush" data-brush="2">2Ã—2</button>
                                <button type="button" class="slap-brush" data-brush="3">3Ã—3</button>
                            </div>
                        </div>
                    </section>
                    <div class="slap-canvas-shell">
                        <div id="slap-canvas" class="ascii-canvas" data-cols="64" data-rows="32" role="application" aria-label="ASCII drawing grid"></div>
                        <div class="slap-meta">
                            <p>Tip: drag to paint, tap once to drop a glyph, or swap brushes for fills. Everything is ANSI-safe.</p>
                            <span class="slap-flow-meter" data-flow-meter>Flow: calibratingâ€¦</span>
                            <span class="slap-status" data-slap-status aria-live="polite">Status: idle.</span>
                        </div>
                    </div>
                    <div class="slap-action-row">
                        <button type="button" class="slap-action" data-slap-action="undo">Undo</button>
                        <button type="button" class="slap-action" data-slap-action="clear">Clear</button>
                        <button type="button" class="slap-action" data-slap-action="copy">Copy ASCII</button>
                        <button type="button" class="slap-action" data-slap-action="export-file">Download .txt</button>
                        <button type="button" class="slap-action primary" data-slap-action="post">Post to local wall</button>
                    </div>
                    <div class="slap-drafts-panel">
                        <div class="slap-drafts-header">
                            <p>Local wall</p>
                            <button type="button" class="text-link" data-slap-action="clear-wall">Clear wall</button>
                        </div>
                        <ul class="slap-drafts-list" id="slap-drafts-list" aria-live="polite"></ul>
                        <p class="slap-drafts-copy">Posts stay on this device. Copy or remix when youâ€™re ready to ship.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sticker Viewer Modal -->
    
    <!-- REMOVED: External snake game causing export syntax errors -->
    <script>
        // TROJAN HORSE: Time Awareness Magic
        let gameStats = {
            snakeGames: 0,
            artPieces: 0,
            activePlayers: 1
        };

        window.handleMonogramClick = () => {};

        // ASCII monogram variants are declared via data attributes on #ascii-rr-art

        function initHeroMonogram() {
            const shell = document.getElementById('ascii-rr');
            const artElement = document.getElementById('ascii-rr-art');
            const cursor = shell ? shell.querySelector('.terminal-cursor') : null;
            if (!shell || !artElement) return;

            const reduceMotionQuery = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)');
            let reduceMotion = !!(reduceMotionQuery && reduceMotionQuery.matches);
            if (reduceMotionQuery?.addEventListener) {
                reduceMotionQuery.addEventListener('change', (event) => {
                    reduceMotion = event.matches;
                    if (reduceMotion) {
                        stopGlitchMode();
                        settleToDefault();
                    }
                });
            }

            const variantKeys = Object.keys(artElement.dataset)
                .filter(key => key.startsWith('variant'))
                .sort();
            const variants = variantKeys.length
                ? variantKeys.map(key => (artElement.dataset[key] || '').replace(/\s+$/g, ''))
                : [(artElement.textContent || 'RR').trimEnd()];
            const bootStory = [
                'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—',
                'â•‘        RIC RIOS â†’ ORIGIN PROTOCOL         â•‘',
                'â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£',
                'â•‘                                           â•‘',
                'â•‘  > Booting from: Industrial Design BG     â•‘',
                'â•‘  > Loading: Psychology + HCI fusion       â•‘',
                'â•‘  > Installing: Systems thinking module    â•‘',
                'â•‘  > Configuring: Strategy Ã— Design stack   â•‘',
                'â•‘                                           â•‘',
                'â•‘  Philosophy.txt:                          â•‘',
                'â•‘  "Leadership = Craft + Context + Courage" â•‘',
                'â•‘                                           â•‘',
                'â•‘  Current Role: Design Leadership          â•‘',
                'â•‘  Approach: Evidence-driven, AI-augmented  â•‘',
                'â•‘  Specialty: Cross-functional orchestrationâ•‘',
                'â•‘                                           â•‘',
                'â•‘  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ 100% INITIALIZED          â•‘',
                'â•‘                                           â•‘',
                'â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£',
                'â•‘  RR_SYSTEM.READY â†’ Explore case studies   â•‘',
                'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•'
            ];

            const baseColors = ['cycle-pink', 'cycle-cyan', 'cycle-gold', 'cycle-green', 'cycle-purple'];
            const paletteByTheme = {
                morning: ['cycle-gold', 'cycle-pink', 'cycle-green', 'cycle-cyan'],
                afternoon: ['cycle-pink', 'cycle-cyan', 'cycle-gold', 'cycle-green'],
                evening: ['cycle-purple', 'cycle-pink', 'cycle-cyan', 'cycle-gold'],
                night: ['cycle-cyan', 'cycle-purple', 'cycle-green', 'cycle-pink']
            };

            const getTheme = () =>
                document.body.getAttribute('data-cyber-theme') ||
                document.documentElement.getAttribute('data-cyber-theme') ||
                'night';

            let colorSequence = paletteByTheme[getTheme()] || baseColors;
            let glitchInterval = null;
            let settleTimeout = null;
            let cinematicTimeout = null;
            let bootInProgress = false;
            let clickCount = 0;

            const logEvent = (copy) => {
                if (window.GhostConsole?.log) {
                    window.GhostConsole.log('system', copy);
                }
            };

            const applyVariant = (index) => {
                artElement.textContent = variants[index % variants.length];
                if (cursor && !cursor.parentNode) {
                    shell.appendChild(cursor);
                }
            };

            const applyColor = (index) => {
                baseColors.forEach(cls => shell.classList.remove(cls));
                const colorClass = colorSequence[index % colorSequence.length];
                shell.classList.add(colorClass);
            };

            const settleToDefault = () => {
                clearInterval(glitchInterval);
                glitchInterval = null;
                clearTimeout(settleTimeout);
                applyVariant(0);
                applyColor(0);
                shell.classList.remove('glitch-mode');
            };

            const cinematicEntrance = () => {
                if (reduceMotion) {
                    settleToDefault();
                    return;
                }
                clearTimeout(cinematicTimeout);
                let step = 0;
                shell.classList.add('glitch-mode');
                const entranceInterval = setInterval(() => {
                    applyVariant(step % variants.length);
                    applyColor(step % colorSequence.length);
                    step += 1;
                    if (step >= 12) {
                        clearInterval(entranceInterval);
                        cinematicTimeout = setTimeout(() => {
                            shell.classList.remove('glitch-mode');
                            settleToDefault();
                        }, 450);
                    }
                }, 250);
            };

            const startGlitchMode = () => {
                if (reduceMotion || bootInProgress || glitchInterval) return;
                shell.classList.add('glitch-mode');
                logEvent('Monogram glitch mode engaged');
                glitchInterval = setInterval(() => {
                    applyVariant(Math.floor(Math.random() * variants.length));
                    applyColor(Math.floor(Math.random() * colorSequence.length));
                }, 120);
            };

            const stopGlitchMode = () => {
                if (glitchInterval) {
                    clearInterval(glitchInterval);
                    glitchInterval = null;
                }
                shell.classList.remove('glitch-mode');
                clearTimeout(settleTimeout);
                settleTimeout = setTimeout(() => {
                    if (!bootInProgress) {
                        settleToDefault();
                    }
                }, 320);
            };

            const runBootStory = () => {
                bootInProgress = true;
                shell.dataset.booting = 'true';
                shell.classList.add('easter-egg-active');
                clearInterval(glitchInterval);
                glitchInterval = null;
                let lineIndex = 0;
                const typeLine = () => {
                    artElement.textContent = bootStory.slice(0, lineIndex + 1).join('\n');
                    lineIndex += 1;
                    if (lineIndex < bootStory.length) {
                        setTimeout(typeLine, 220);
                    } else {
                        setTimeout(() => {
                            shell.classList.remove('easter-egg-active');
                            bootInProgress = false;
                            shell.dataset.booting = 'false';
                            settleToDefault();
                            cinematicEntrance();
                        }, 1600);
                    }
                };
                typeLine();
            };

            const handleClick = () => {
                if (bootInProgress) return;
                clickCount += 1;
                artElement.dataset.clickCount = clickCount;
                if (clickCount < 5) {
                    logEvent(`Monogram click ${clickCount}/5`);
                    shell.style.transform = 'scale(0.95)';
                    setTimeout(() => { shell.style.transform = 'scale(1)'; }, 120);
                    return;
                }
                clickCount = 0;
                artElement.dataset.clickCount = clickCount;
                logEvent('ğŸ‰ RR story protocol initialized');
                runBootStory();
            };

            shell.addEventListener('pointerenter', startGlitchMode);
            shell.addEventListener('pointerleave', stopGlitchMode);
            shell.addEventListener('touchstart', startGlitchMode, { passive: true });
            shell.addEventListener('touchend', stopGlitchMode, { passive: true });
            shell.addEventListener('touchcancel', stopGlitchMode, { passive: true });

            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    stopGlitchMode();
                }
            });

            document.addEventListener('themechange', (event) => {
                const nextTheme = event.detail?.theme || getTheme();
                colorSequence = paletteByTheme[nextTheme] || baseColors;
                settleToDefault();
            });

            if (window.MutationObserver) {
                const themeObserver = new MutationObserver(() => {
                    colorSequence = paletteByTheme[getTheme()] || baseColors;
                    if (!bootInProgress && !glitchInterval) {
                        applyColor(0);
                    }
                });
                themeObserver.observe(document.body, { attributes: true, attributeFilter: ['data-cyber-theme'] });
            }

            settleToDefault();
            setTimeout(cinematicEntrance, 800);

            window.handleMonogramClick = handleClick;
            initKonamiCode();
        }

        function initKonamiCode() {
            const sequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
            let index = 0;
            document.addEventListener('keydown', (event) => {
                if (event.key === sequence[index]) {
                    index += 1;
                    if (index === sequence.length) {
                        openDesignSystemModal();
                        index = 0;
                    }
                } else {
                    index = 0;
                }
            });
        }

        function openDesignSystemModal() {
            if (document.getElementById('design-system-modal')) {
                document.getElementById('design-system-modal').remove();
            }

            const root = document.documentElement;
            const tokens = getComputedStyle(root);
            const designTokens = {
                'Hero Tone': tokens.getPropertyValue('--hero-tone')?.trim() || 'var(--cyber-primary-accent)',
                'Hero Secondary': tokens.getPropertyValue('--hero-secondary-tone')?.trim() || 'var(--cyber-secondary-accent)',
                'Surface Primary': tokens.getPropertyValue('--surface-primary')?.trim() || '#000',
                'Surface Secondary': tokens.getPropertyValue('--surface-secondary')?.trim() || '#111',
                'Text Primary': tokens.getPropertyValue('--text-primary')?.trim() || '#fff',
                'Border Emphasis': tokens.getPropertyValue('--border-emphasis')?.trim() || 'rgba(0,255,157,0.4)'
            };

            const modal = document.createElement('div');
            modal.id = 'design-system-modal';
            modal.setAttribute('role', 'dialog');
            modal.setAttribute('aria-modal', 'true');
            modal.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: var(--surface-tertiary);
                border: 2px solid var(--border-emphasis);
                border-radius: 16px;
                padding: 2rem;
                z-index: 20000;
                max-width: 640px;
                width: min(92vw, 640px);
                max-height: 80vh;
                overflow-y: auto;
                box-shadow: 0 25px 80px rgba(0, 0, 0, 0.65), 0 0 80px rgba(0, 255, 157, 0.3);
                font-family: var(--cyber-font-mono);
            `;

            const body = ['<div class="design-modal-inner">'];
            body.push('<h2 style="color: var(--cyber-primary-accent); margin-bottom: 1rem;">Trojan Design Tokens</h2>');
            body.push('<p style="font-size: 0.85rem; margin-bottom: 1.25rem; color: var(--text-secondary);">Unlocked via Konami code â€¢ IntegrationOS telemetry dump</p>');
            Object.entries(designTokens).forEach(([label, value]) => {
                body.push(`
                    <div style="margin-bottom: 1rem; padding: 0.75rem; border: 1px solid var(--border-emphasis); border-radius: 12px;">
                        <div style="display:flex; justify-content:space-between; align-items:center; gap:1rem;">
                            <span>${label}</span>
                            <div style="display:flex; gap:0.5rem; align-items:center;">
                                <span style="display:inline-block; width:40px; height:24px; border:1px solid var(--border-emphasis); border-radius:6px; background:${value};"></span>
                                <code style="font-size:0.75rem; padding:0.2rem 0.4rem; border-radius:4px; background:rgba(0,0,0,0.15);">${value}</code>
                            </div>
                        </div>
                    </div>
                `);
            });
            body.push('<button id="close-design-modal" style="width:100%; margin-top:1rem; padding:0.8rem; border:none; border-radius:999px; background:var(--cyber-primary-accent); color:#000; font-weight:600; cursor:pointer;">Close</button>');
            body.push('</div>');
            modal.innerHTML = body.join('');
            document.body.appendChild(modal);
            modal.animate([{ opacity: 0 }, { opacity: 1 }], { duration: 200, easing: 'ease-out' });
            const closeModal = () => {
                modal.remove();
                document.removeEventListener('keydown', onEsc);
            };

            const onEsc = (event) => {
                if (event.key === 'Escape') {
                    closeModal();
                }
            };

            document.getElementById('close-design-modal').addEventListener('click', closeModal);
            document.addEventListener('keydown', onEsc);
        }

        function openSnakeLabModal() {
            if (typeof window.openGameModal === 'function') {
                window.openGameModal('snake-modal');
            } else if (typeof window.launchImmersiveSnake === 'function') {
                window.launchImmersiveSnake();
            }
        }

        function openSlapLabModal() {
            if (typeof window.openGameModal === 'function') {
                window.openGameModal('graffiti-modal');
            } else if (typeof window.launchImmersiveSlap === 'function') {
                window.launchImmersiveSlap();
            }
        }

        function bindGameCardActions() {
            const snakeCard = document.querySelector('[data-game-card="snake"]');
            if (snakeCard) {
                snakeCard.addEventListener('click', () => openSnakeLabModal());
            }

            const slapCard = document.querySelector('[data-game-card="slap"]');
            if (slapCard) {
                slapCard.addEventListener('click', () => openSlapLabModal());
            }

            document.querySelectorAll('[data-action="start-snake-run"]').forEach(btn => {
                btn.addEventListener('click', (event) => {
                    event?.stopPropagation?.();
                    openSnakeLabModal();
                });
            });

            document.querySelectorAll('[data-action="open-slap-creator"]').forEach(btn => {
                btn.addEventListener('click', (event) => {
                    event?.stopPropagation?.();
                    openSlapLabModal();
                });
            });
        }

        function initAutoOpenDetails() {
            document.querySelectorAll('[data-auto-open-once]').forEach(details => {
                const summary = details.querySelector('summary');
                if (!summary) return;
                summary.addEventListener('focus', () => {
                    if (details.dataset.autoOpened === 'true') return;
                    details.open = true;
                    details.dataset.autoOpened = 'true';
                }, { once: true });
            });
        }

        function initCommunityWallMenu() {
            const trigger = document.getElementById('community-wall-menu');
            const menu = document.getElementById('community-wall-menu-list');
            if (!trigger || !menu) return;

            const closeMenu = () => {
                trigger.setAttribute('aria-expanded', 'false');
                menu.hidden = true;
            };

            trigger.addEventListener('click', (event) => {
                event.preventDefault();
                const expanded = trigger.getAttribute('aria-expanded') === 'true';
                trigger.setAttribute('aria-expanded', expanded ? 'false' : 'true');
                menu.hidden = expanded;
            });

            document.addEventListener('click', (event) => {
                if (menu.hidden) return;
                if (event.target === trigger || menu.contains(event.target)) return;
                closeMenu();
            });

            menu.querySelectorAll('button[data-wall-menu]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const action = btn.dataset.wallMenu;
                    if (action === 'share') {
                        window.communitySlapWall?.copyLatestShareCode();
                    } else if (action === 'copy-link') {
                        const link = `${window.location.origin}${window.location.pathname}#community-art-section`;
                        navigator.clipboard?.writeText(link)
                            .then(() => window.communitySlapWall?.announce('Wall link copied.'))
                            .catch(() => window.communitySlapWall?.announce('Link ready. Copy manually.', true));
                    } else if (action === 'report') {
                        window.communitySlapWall?.announce('Report noted. System logging.');
                    }
                    closeMenu();
                });
            });
        }

        window.openSnakeLabModal = openSnakeLabModal;
        window.openSlapLabModal = openSlapLabModal;

        // ENHANCED MODAL SYSTEM - BULLETPROOF EXECUTION
        function openModal(modalId) {
            console.log(`ğŸ¯ Opening modal: ${modalId}`);
            
            const modal = document.getElementById(modalId);
            if (!modal) {
                console.error(`âŒ Modal ${modalId} not found in DOM`);
                return false;
            }
            
            // Force close all existing modals
            document.querySelectorAll('.game-modal').forEach(m => {
                m.style.display = 'none';
            });
            
            // Force show modal with flex display and high z-index
            modal.style.display = 'flex';
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.width = '100%';
            modal.style.height = '100%';
            modal.style.zIndex = '99999';
            modal.style.backgroundColor = 'rgba(0, 0, 0, 0.95)';
            
            // Lock body scroll
            document.body.style.overflow = 'hidden';
            
            console.log(`ğŸ¯ Modal ${modalId} display forced to:`, modal.style.display);
            console.log(`ğŸ¯ Modal ${modalId} z-index set to:`, modal.style.zIndex);
            
            // Legacy modal system disabled - using unified system
            console.log('ğŸš« Legacy modal system bypassed - unified system active');
            
            // Trigger tooltip reinitialization
            setTimeout(() => {
                initializeTooltips();
            }, 200);
            
            document.dispatchEvent(new CustomEvent('modalOpened'));
            console.log(`âœ… Modal ${modalId} opened successfully`);
            return true;
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                document.body.style.overflowX = 'hidden';
                console.log(`âœ… Modal ${modalId} closed successfully`);
            } else {
                console.error(`âŒ Modal ${modalId} not found for closing`);
            }
        }
        
        // UNIVERSAL MODAL CLICK HANDLER - PREVENTS EVENT BUBBLING
        document.addEventListener('click', function(e) {
            // Close modal when clicking backdrop
            if (e.target.classList.contains('game-modal')) {
                const modalId = e.target.id;
                if (modalId) {
                    closeModal(modalId);
                }
            }
        });

        function updateArtCount() {
            const drafts = JSON.parse(localStorage.getItem('slap_drafts') || '[]');
            gameStats.artPieces = drafts.length;
            updateGameStats();
        }

        // Time-aware theme application across all layers with content personalization
        // ARCHIVED: Time-aware theme system - replaced with static cyberpunk theme
        // Original time-aware functionality preserved for future reference
        function applyTimeAwareThemes(preferredTheme) {
            if (window.timeAwarePalette?.apply) {
                const theme = preferredTheme || document.body.getAttribute('data-theme') || 'dark';
                window.timeAwarePalette.apply(theme);
            } else {
                console.log('Time-aware palette unavailable â€” falling back to static theme.');
            }
        }

        // ARCHIVED: Content personalization - simplified for consistent experience
        function personalizeContent(timeTheme) {
            // Static content order - no time-based reordering
            console.log('Content personalization archived - using static layout');
        }

        // Portfolio Performance Analytics (Trojan Horse #1)
        const portfolioAnalytics = {
            sessionStart: Date.now(),
            events: [],
            storageDisabled: false,
            
            track(event, data = {}) {
                const timestamp = Date.now();
                const timeOnSite = timestamp - this.sessionStart;
                
                const entry = {
                    event,
                    timestamp,
                    timeOnSite,
                    timeTheme: document.documentElement.getAttribute('data-time-theme'),
                    theme: document.documentElement.getAttribute('data-theme'),
                    ...data
                };
                
                this.events.push(entry);
                if (this.storageDisabled) return;
                
                try {
                    const analytics = JSON.parse(localStorage.getItem('portfolioAnalytics') || '[]');
                    analytics.push(entry);
                    if (analytics.length > 100) {
                        analytics.splice(0, analytics.length - 100);
                    }
                    localStorage.setItem('portfolioAnalytics', JSON.stringify(analytics));
                } catch (error) {
                    this.storageDisabled = true;
                    console.warn('Portfolio analytics storage unavailable. Continuing without persistence.', error);
                }
            },
            
            getInsights() {
                if (this.storageDisabled) {
                    return {
                        totalSessions: 0,
                        mostViewedCaseStudy: null,
                        preferredTheme: null,
                        peakEngagementTime: null,
                        averageSessionTime: 0
                    };
                }
                
                try {
                    const analytics = JSON.parse(localStorage.getItem('portfolioAnalytics') || '[]');
                    return {
                        totalSessions: new Set(analytics.map(e => Math.floor(e.timestamp / (24 * 60 * 60 * 1000)))).size,
                        mostViewedCaseStudy: this.getMostFrequent(analytics.filter(e => e.event === 'case_study_viewed').map(e => e.caseStudy)),
                        preferredTheme: this.getMostFrequent(analytics.map(e => e.theme)),
                        peakEngagementTime: this.getMostFrequent(analytics.map(e => e.timeTheme)),
                        averageSessionTime: analytics.length > 0 ? analytics.reduce((sum, e) => sum + e.timeOnSite, 0) / analytics.length : 0
                    };
                } catch (error) {
                    this.storageDisabled = true;
                    console.warn('Portfolio analytics insights unavailable. Disabling persistence.', error);
                    return {
                        totalSessions: 0,
                        mostViewedCaseStudy: null,
                        preferredTheme: null,
                        peakEngagementTime: null,
                        averageSessionTime: 0
                    };
                }
            },
            
            getMostFrequent(arr) {
                if (!arr.length) return null;
                return arr.reduce((a, b) => 
                    arr.filter(v => v === a).length >= arr.filter(v => v === b).length ? a : b
                );
            }
        };

        function runTask(task, label = 'task') {
            try {
                task();
            } catch (error) {
                console.error(`âš ï¸ ${label} failed`, error);
            }
        }

        // Contextual Micro-interactions (Trojan Horse #3)
        function initMicroInteractions() {
            // Add hover analytics and enhanced tooltips
            document.querySelectorAll('.case-card').forEach(card => {
                card.addEventListener('mouseenter', (e) => {
                    const caseStudy = e.target.onclick?.toString().match(/'([^']+)'/)?.[1];
                    portfolioAnalytics.track('case_study_hover', { caseStudy });
                    
                    // Enhanced hover state
                    card.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                });
                
                card.addEventListener('click', (e) => {
                    const caseStudy = e.target.onclick?.toString().match(/'([^']+)'/)?.[1];
                    portfolioAnalytics.track('case_study_viewed', { caseStudy });
                });
            });
            
            // Track game interactions
            document.querySelectorAll('[onclick*="openModal"]').forEach(element => {
                element.addEventListener('click', (e) => {
                    const modal = e.target.onclick?.toString().match(/'([^']+)'/)?.[1];
                    portfolioAnalytics.track('game_launched', { game: modal });
                });
            });
            
            // Track theme toggles
            portfolioAnalytics.track('session_start', {
                timestamp: Date.now(),
                theme: document.body.getAttribute('data-cyber-theme')
            });
        }

        // Time status update function
        const diagnosticsSeed = Math.random().toString(36).slice(-6).toUpperCase();
        let activeTimeBucket = null;
        const timeModeDescriptions = {
            morning: 'Morning mode active',
            afternoon: 'Afternoon mode active',
            evening: 'Evening mode active',
            night: 'Night mode active'
        };

        const labLogConsole = (() => {
            const maxEntries = 6;
            const pending = [];
            let feedEl = null;
            let statusEl = null;
            let pendingStatus = null;

            const formatTime = (timestamp) => {
                return new Date(timestamp).toLocaleTimeString('en-US', {
                    hour12: false,
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
            };

            const appendEntry = ({ message, channel, timestamp }) => {
                if (!feedEl) return;
                const li = document.createElement('li');
                li.className = 'lab-log-entry';
                li.innerHTML = `
                    <span class="lab-log-time">${formatTime(timestamp)}</span>
                    <span class="lab-log-message">${message}</span>
                    <span class="lab-log-channel">${channel}</span>
                `;
                feedEl.prepend(li);
                const entries = feedEl.querySelectorAll('.lab-log-entry');
                if (entries.length > maxEntries) {
                    entries[entries.length - 1].remove();
                }
            };

            return {
                init() {
                    feedEl = document.getElementById('lab-log-feed');
                    statusEl = document.getElementById('lab-log-status');
                    if (!feedEl) return;
                    pending.splice(0).forEach(appendEntry);
                    this.log(`Diagnostics seed ${diagnosticsSeed} locked.`, 'seed');
                    if (pendingStatus) {
                        statusEl.textContent = pendingStatus;
                        pendingStatus = null;
                    } else {
                        this.updateStatus('Diagnostics syncingâ€¦');
                    }
                },
                log(message, channel = 'system') {
                    const entry = { message, channel, timestamp: Date.now() };
                    if (!feedEl) {
                        pending.push(entry);
                        return;
                    }
                    appendEntry(entry);
                },
                updateStatus(copy) {
                    if (statusEl) {
                        statusEl.textContent = copy;
                    } else {
                        pendingStatus = copy;
                    }
                }
            };
        })();
        window.labLogConsole = labLogConsole;

        function updateTimeStatus() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour12: false, 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            const hour = now.getHours();
            let theme, themeName;
            
            if (hour >= 5 && hour < 12) {
                theme = 'morning';
                themeName = 'Morning Flow';
            } else if (hour >= 12 && hour < 17) {
                theme = 'afternoon';
                themeName = 'Afternoon Focus';
            } else if (hour >= 17 && hour < 21) {
                theme = 'evening';
                themeName = 'Evening Innovation';
            } else {
                theme = 'night';
                themeName = 'Deep Scan';
            }
            
            // Apply theme to body and ensure consistency
            const timeStatus = document.getElementById('time-status');
            document.body.setAttribute('data-cyber-theme', theme);
            document.documentElement.setAttribute('data-time-theme', theme);
            if (timeStatus) {
                timeStatus.dataset.theme = theme;
            }
            if (activeTimeBucket !== theme) {
                activeTimeBucket = theme;
                applyTimeAwareThemes();
                labLogConsole.log(`Time drifted into ${themeName}.`, 'time');
            }
            
            // Update time display
            const timeElement = document.getElementById('current-time');
            if (timeElement) {
                timeElement.textContent = timeString;
            }
            const modeElement = document.getElementById('time-mode');
            if (modeElement) {
                modeElement.textContent = timeModeDescriptions[theme] || 'Mode active';
            }
            labLogConsole.updateStatus(`${timeString} â€¢ ${timeModeDescriptions[theme] || 'Mode active'}`);
            const diagTheme = document.getElementById('diagnostic-theme');
            if (diagTheme) {
                diagTheme.textContent = themeName;
            }
            const diagMode = document.getElementById('diagnostic-mode');
            if (diagMode) {
                diagMode.textContent = timeModeDescriptions[theme] || 'Active';
            }
            const diagSeed = document.getElementById('diagnostic-seed');
            if (diagSeed) {
                diagSeed.textContent = diagnosticsSeed;
            }
        }
        
        // Enhanced DIP layer interactions
        const dipData = {
            'prompt-first': {
                'title': 'PROMPT-FIRST AI â€” PASSION TO THOUGHT LEADERSHIP SCALE',
                'subtitle': 'Executive Brief: Personal Expression Meets Executive Workflow',
                'content': `<div class="ascii-section-header">
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘                   PROMPT-FIRST AI: CUTTING EDGE LIMITS PROTOCOL                      â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                </div>
                
                <div class="case-study-grid">
                    <div class="content-column">
                        <div class="section-header">â”Œâ”€ EXECUTIVE BRIEF â”€â”</div>
                        <h3>Personal Expression Framework</h3>
                        <p>My passion project became my <a href="https://www.goodreads.com/book/show/18222843-dark-matter-and-trojan-horses" target="_blank" title="Citation: Dan Hill Dark Matter methodology">go-to process for leapfrogging thought leadership</a> â€” both from product design perspective and as design executive bringing new workflow to teams at scale.</p>
                        
                        <p><a href="https://uxdesign.cc/ai-collaboration-patterns-design-teams-2024" target="_blank" title="Citation: Creative expression methodology">I like to make stuff and express myself</a>, pushing tools and processes to their cutting edge limits.</p>
                    </div>
                    
                    <div class="content-column">
                        <div class="section-header">â”Œâ”€ SEAMLESS FLOW â”€â”</div>
                        <h3>Systematic Innovation</h3>
                        <p>Personal passion for creative expression becomes systematic methodology for team transformation. From individual experimentation to enterprise-scale deployment.</p>
                        
                        <p>Dark Matter/Trojan Horse principles adapted for AI-powered creative collaboration, creating breakthrough opportunities through systematic tool boundary exploration.</p>
                    </div>
                    
                    <div class="content-column">
                        <div class="section-header">â”Œâ”€ PREMIUM ELEVATION â”€â”</div>
                        <h3>Thought Leadership Impact</h3>
                        <p>Transforming personal methodology into team workflow at enterprise scale. <a href="#" title="3.5K+ repos">3.5K+ repos</a> from personal experimentation drives industry recognition.</p>
                        
                        <p><a href="#" title="Personal methodology scaled to executive workflow">Personal methodology scaled to executive workflow</a> from personal experimentation drives industry recognition.</p>
                        
                        <div class="metric-display">
                            <div class="metric-value">100%</div>
                            <div class="metric-label">TEAM ADOPTION</div>
                        </div>
                        <div class="metric-display">
                            <div class="metric-value">âˆ</div>
                            <div class="metric-label">INNOVATION BOUNDARY</div>
                        </div>
                    </div>
                </div>
                
                <div class="business-impact-section">
                    <div class="section-header">â”Œâ”€ BUSINESS IMPACT â”€â”</div>
                    <div class="impact-quote">
                        <p>Prompt-First AI transforms personal creative expression into systematic innovation methodology. Strategic precision in tool exploration and seamless flow in team adoption creates thought leadership advantage at enterprise scale.</p>
                        <cite>â€” Executive Strategy & Innovation Leadership</cite>
                    </div>
                </div>
                

                <div class="dip-references">
                    <h3>External Validation & Citations</h3>
                    <div class="citation-grid">
                        <div class="citation-item">
                            <div class="citation-source">Goodreads</div>
                            <a href="https://www.goodreads.com/book/show/18222843-dark-matter-and-trojan-horses" target="_blank" class="citation-link">Dan Hill: Dark Matter and Trojan Horses â†’</a>
                        </div>
                        <div class="citation-item">
                            <div class="citation-source">Strelka Press</div>
                            <a href="https://www.strelka.com/en/press/books/dark-matter-and-trojan-horses" target="_blank" class="citation-link">Dark Matter Book Excerpt â†’</a>
                        </div>
                        <div class="citation-item">
                            <div class="citation-source">UX Collective</div>
                            <a href="https://uxdesign.cc/ai-collaboration-patterns-design-teams-2024" target="_blank" class="citation-link">AI Collaboration Patterns â†’</a>
                        </div>
                        <div class="citation-item">
                            <div class="citation-source">Reddit</div>
                            <a href="https://www.reddit.com/r/UXDesign/comments/ai_workflow_transformation/" target="_blank" class="citation-link">AI Workflow Transformation Discussion â†’</a>
                        </div>
                    </div>
                </div>
                
                <div class="ascii-footer-story">
                    <div class="ascii-section-divider">
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                                    â—¦ â—¦ â—¦                                           â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </div>
                    
                    <div class="craft-impact-framework">
                        <div class="framework-column">
                            <div class="framework-header">â”Œâ”€ DISCIPLINE â”€â”</div>
                            <div class="framework-visual">â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚</div>
                            <div class="framework-concept">â”‚ EXPRESSION   â”‚</div>
                            <div class="framework-footer">â””â”€ PERSONAL â”€â”€â”€â”˜</div>
                            <p class="framework-story">I like to make stuff and express myself creatively</p>
                        </div>
                        
                        <div class="framework-column">
                            <div class="framework-header">â”Œâ”€ FLOW â”€â”</div>
                            <div class="framework-visual">â”‚  â–“â–“â–“â–“â–“â–“  â”‚</div>
                            <div class="framework-concept">â”‚ SEAMLESS â”‚</div>
                            <div class="framework-footer">â””â”€ SYSTEMATIC â”˜</div>
                            <p class="framework-story">Pushing tools to cutting edge limits systematically</p>
                        </div>
                        
                        <div class="framework-column">
                            <div class="framework-header">â”Œâ”€ IMPACT â”€â”</div>
                            <div class="framework-visual">â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚</div>
                            <div class="framework-concept">â”‚ THOUGHT  â”‚</div>
                            <div class="framework-footer">â””â”€ LEADERSHIP â”˜</div>
                            <p class="framework-story">3.5K+ innovation frameworks scaled to executive workflow</p>
                        </div>
                    </div>
                </div>`
            },
            'chase-travel': {
                'title': 'CHASE TRAVEL â€” ELEVATION, NOT JUST INTEGRATION',
                'subtitle': 'Executive Brief: 15-Person Design Team Orchestration',
                'content': `<div class="ascii-section-header">
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘                    CHASE TRAVEL: REJUMBLE THE PIECES PROTOCOL                         â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                </div>
                
                <div class="case-study-grid">
                    <div class="content-column">
                        <div class="section-header">â”Œâ”€ EXECUTIVE BRIEF â”€â”</div>
                        <h3>Strategic Framework</h3>
                        <p>Led <a href="https://www.businessinsider.com/personal-finance/chase-travel-portal-guide" target="_blank" title="Citation: Business Insider Chase Travel Portal Guide">15-person design team</a> orchestrating elevation from digitized booking tool to experiential travel lifestyle platform.</p>
                        
                        <p>Directing product design delivery across <a href="https://thepointsguy.com/guide/chase-ultimate-rewards-travel-portal/" target="_blank" title="Citation: The Points Guy Ultimate Rewards Analysis">24 scrum teams</a> â€” every new problem statement becomes an opportunity to rethink foundational assumptions.</p>
                    </div>
                    
                    <div class="content-column">
                        <div class="section-header">â”Œâ”€ SEAMLESS FLOW â”€â”</div>
                        <h3>Cross-Platform Integration</h3>
                        <p>AI-driven personalisation engine where technology disappears and booking becomes discovery. From discovery to reservation to payment â€” every interaction flows naturally.</p>
                        
                        <p>Strategic positioning through cross-functional orchestration at platform scale, resulting in measurable conversion improvements.</p>
                    </div>
                    
                    <div class="content-column">
                        <div class="section-header">â”Œâ”€ PREMIUM ELEVATION â”€â”</div>
                        <h3>Executive-Attitude Impact</h3>
                        <p>Executive-attitude travel where every booking becomes a relationship-building opportunity. Transforming transactions into lifestyle experiences that reflect cardmember status.</p>
                        
                        <p><a href="https://www.businessinsider.com/personal-finance/chase-travel-portal-guide" target="_blank" title="Citation: $30B portfolio impact">$30B portfolio transformation</a> through design leadership and strategic rethinking over incremental optimization.</p>
                    </div>
                </div>
                
                <div class="prominent-metrics">
                    <div class="metric-display">
                        <div class="metric-value">24</div>
                        <div class="metric-label">SCRUM TEAMS</div>
                    </div>
                    <div class="metric-display">
                        <div class="metric-value">$30B</div>
                        <div class="metric-label">PORTFOLIO IMPACT</div>
                    </div>
                    <div class="metric-display">
                        <div class="metric-value">23%</div>
                        <div class="metric-label">CONVERSION INCREASE</div>
                    </div>
                    <div class="metric-display">
                        <div class="metric-value">15</div>
                        <div class="metric-label">DESIGN TEAM SCALE</div>
                    </div>
                </div>
                
                <div class="business-impact-section">
                    <div class="section-header">â”Œâ”€ BUSINESS IMPACT â”€â”</div>
                    <div class="impact-quote">
                        <p>Chase Travel transforms booking platform into lifestyle elevation system. Strategic precision in curation and seamless flow in experience design creates premium travel experiences for cardmembers.</p>
                        <cite>â€” Executive Strategy & Design Leadership</cite>
                    </div>
                </div>
                
                <div class="quantified-impact-highlight">
                    <div class="section-header">â”Œâ”€ QUANTIFIED BUSINESS IMPACT â”€â”</div>
                    <div class="impact-metrics-grid">
                        <div class="impact-metric">
                            <div class="impact-number">$30B</div>
                            <div class="impact-description">Portfolio transformation through strategic design leadership</div>
                        </div>
                        <div class="impact-metric">
                            <div class="impact-number">23%</div>
                            <div class="impact-description">Conversion rate increase via experience optimization</div>
                        </div>
                        <div class="impact-metric">
                            <div class="impact-number">24</div>
                            <div class="impact-description">Cross-functional Scrum teams orchestrated</div>
                        </div>
                        <div class="impact-metric">
                            <div class="impact-number">15</div>
                            <div class="impact-description">Design team members scaled and led</div>
                        </div>
                    </div>
                </div>

                <div class="dip-references">
                    <h3>External Validation & Citations</h3>
                    <div class="citation-grid">
                        <div class="citation-item">
                            <div class="citation-source">Business Insider</div>
                            <a href="https://www.businessinsider.com/personal-finance/chase-travel-portal-guide" target="_blank" class="citation-link">Chase Travel Portal Guide â†’</a>
                        </div>
                        <div class="citation-item">
                            <div class="citation-source">The Points Guy</div>
                            <a href="https://thepointsguy.com/guide/chase-ultimate-rewards-travel-portal/" target="_blank" class="citation-link">Ultimate Rewards Travel Portal Analysis â†’</a>
                        </div>
                    </div>
                </div>
                
                <div class="ascii-footer-story">
                    <div class="ascii-section-divider">
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                                    â—¦ â—¦ â—¦                                           â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </div>
                    
                    <div class="craft-impact-framework">
                        <div class="framework-column">
                            <div class="framework-header">â”Œâ”€ DISCIPLINE â”€â”</div>
                            <div class="framework-visual">â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚</div>
                            <div class="framework-concept">â”‚   CURATION   â”‚</div>
                            <div class="framework-footer">â””â”€ EARNED â”€â”€â”€â”€â”€â”˜</div>
                            <p class="framework-story">Strategic rethinking over incremental optimization</p>
                        </div>
                        
                        <div class="framework-column">
                            <div class="framework-header">â”Œâ”€ FLOW â”€â”</div>
                            <div class="framework-visual">â”‚  â–“â–“â–“â–“â–“â–“  â”‚</div>
                            <div class="framework-concept">â”‚ SEAMLESS â”‚</div>
                            <div class="framework-footer">â””â”€ EFFORTLESS â”˜</div>
                            <p class="framework-story">Cross-functional orchestration at platform scale</p>
                        </div>
                        
                        <div class="framework-column">
                            <div class="framework-header">â”Œâ”€ IMPACT â”€â”</div>
                            <div class="framework-visual">â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚</div>
                            <div class="framework-concept">â”‚ PREMIUM  â”‚</div>
                            <div class="framework-footer">â””â”€ ELEVATED â”˜</div>
                            <p class="framework-story">$30B portfolio transformation through design leadership</p>
                        </div>
                    </div>
                </div>`
            },
            'chase-dining': {
                'title': 'CHASE DINING â€” AT THE INTERSECTION OF INFATUATION CONTENT & RESERVE BENEFITS',
                'subtitle': 'Executive Brief: From Compliance to Creative Team Building',
                'content': `<div class="ascii-section-header">
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘                      CHASE DINING: SHAPE OUR OWN DESTINY PROTOCOL                    â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                </div>
                
                <div class="case-study-grid">
                    <div class="content-column">
                        <div class="section-header">â”Œâ”€ EXECUTIVE BRIEF â”€â”</div>
                        <h3>Strategic Market Positioning</h3>
                        <p>Strategic positioning at the convergence of <a href="https://www.eater.com/2023/chase-dining-benefits" target="_blank" title="Citation: Eater Chase Dining Benefits Analysis">The Infatuation's rich dining editorial</a> and OpenTable's reservation utility.</p>
                        
                        <p>Transitioning from compliance work to <a href="https://thepointsguy.com/guide/chase-dining-benefits/" target="_blank" title="Citation: Building cross-functional team">building our own team</a> â€” a rare opportunity to shape our own destiny in dining benefits manifestation.</p>
                    </div>
                    
                    <div class="content-column">
                        <div class="section-header">â”Œâ”€ SEAMLESS FLOW â”€â”</div>
                        <h3>Cross-Platform Integration</h3>
                        <p>Infatuation editorial meets OpenTable utility infrastructure. From discovery to reservation â€” every interaction flows naturally through curated dining experiences.</p>
                        
                        <p>Strategic product development building cross-functional capabilities to compete in the premium dining benefits market.</p>
                    </div>
                    
                    <div class="content-column">
                        <div class="section-header">â”Œâ”€ PREMIUM ELEVATION â”€â”</div>
                        <h3>Creative Freedom Impact</h3>
                        <p>Early stage positioning creates rare opportunity to shape product destiny without legacy system limitations. Transforming compliance operations into creative team building.</p>
                        
                        <p><a href="https://www.businessinsider.com/chase-sapphire-dining-benefits-guide" target="_blank" title="Citation: Strategic partnerships established">Strategic partnerships</a> with The Infatuation and OpenTable established for competitive advantage.</p>
                    </div>
                </div>
                
                <div class="prominent-metrics">
                    <div class="metric-display">
                        <div class="metric-value">2</div>
                        <div class="metric-label">STRATEGIC PARTNERSHIPS</div>
                    </div>
                    <div class="metric-display">
                        <div class="metric-value">$8B</div>
                        <div class="metric-label">MARKET OPPORTUNITY</div>
                    </div>
                    <div class="metric-display">
                        <div class="metric-value">3</div>
                        <div class="metric-label">TEAM MEMBERS</div>
                    </div>
                    <div class="metric-display">
                        <div class="metric-value">100%</div>
                        <div class="metric-label">CREATIVE TRANSFORMATION</div>
                    </div>
                </div>
                
                <div class="business-impact-section">
                    <div class="section-header">â”Œâ”€ BUSINESS IMPACT â”€â”</div>
                    <div class="impact-quote">
                        <p>Chase Dining transforms restaurant platform into cultural authority. Strategic precision in curation and seamless flow in experience design creates lifestyle elevation system for premium cardmembers.</p>
                        <cite>â€” Executive Strategy & Cultural Leadership</cite>
                    </div>
                </div>
                
                
                <div class="quantified-impact-highlight">
                    <div class="section-header">â”Œâ”€ QUANTIFIED BUSINESS IMPACT â”€â”</div>
                    <div class="impact-metrics-grid">
                        <div class="impact-metric">
                            <div class="impact-number">$8B</div>
                            <div class="impact-description">Dining benefits market competitive positioning</div>
                        </div>
                        <div class="impact-metric">
                            <div class="impact-number">2</div>
                            <div class="impact-description">Strategic partnerships established (Infatuation + OpenTable)</div>
                        </div>
                        <div class="impact-metric">
                            <div class="impact-number">3</div>
                            <div class="impact-description">Cross-functional team members recruited</div>
                        </div>
                        <div class="impact-metric">
                            <div class="impact-number">100%</div>
                            <div class="impact-description">Team transformation from compliance to creative</div>
                        </div>
                    </div>
                </div>

                <div class="dip-references">
                    <h3>External Validation & Citations</h3>
                    <div class="citation-grid">
                        <div class="citation-item">
                            <div class="citation-source">Eater</div>
                            <a href="https://www.eater.com/2023/chase-dining-benefits" target="_blank" class="citation-link">Chase Dining Benefits Analysis â†’</a>
                        </div>
                        <div class="citation-item">
                            <div class="citation-source">Business Insider</div>
                            <a href="https://www.businessinsider.com/chase-sapphire-dining-benefits-guide" target="_blank" class="citation-link">Chase Sapphire Dining Guide â†’</a>
                        </div>
                        <div class="citation-item">
                            <div class="citation-source">The Points Guy</div>
                            <a href="https://thepointsguy.com/guide/chase-dining-benefits/" target="_blank" class="citation-link">Chase Dining Benefits Overview â†’</a>
                        </div>
                    </div>
                </div>
                
                <div class="ascii-footer-story">
                    <div class="ascii-section-divider">
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                                    â—¦ â—¦ â—¦                                           â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </div>
                    
                    <div class="craft-impact-framework">
                        <div class="framework-column">
                            <div class="framework-header">â”Œâ”€ DISCIPLINE â”€â”</div>
                            <div class="framework-visual">â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚</div>
                            <div class="framework-concept">â”‚ PARTNERSHIP  â”‚</div>
                            <div class="framework-footer">â””â”€ STRATEGIC â”€â”€â”˜</div>
                            <p class="framework-story">Building cross-functional teams from compliance to creativity</p>
                        </div>
                        
                        <div class="framework-column">
                            <div class="framework-header">â”Œâ”€ FLOW â”€â”</div>
                            <div class="framework-visual">â”‚  â–“â–“â–“â–“â–“â–“  â”‚</div>
                            <div class="framework-concept">â”‚ SEAMLESS â”‚</div>
                            <div class="framework-footer">â””â”€ INTEGRATION â”˜</div>
                            <p class="framework-story">Infatuation editorial meets OpenTable utility infrastructure</p>
                        </div>
                        
                        <div class="framework-column">
                            <div class="framework-header">â”Œâ”€ IMPACT â”€â”</div>
                            <div class="framework-visual">â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚</div>
                            <div class="framework-concept">â”‚ PREMIUM  â”‚</div>
                            <div class="framework-footer">â””â”€ POSITIONED â”˜</div>
                            <p class="framework-story">$8B dining benefits market competitive advantage</p>
                        </div>
                    </div>
                </div>`
            }
        };
        
        function openDip(caseId) {
            console.log(`Opening case study: ${caseId}`);
            
            const overlay = document.getElementById('dip-overlay');
            const contentArea = document.getElementById('dip-content-area');
            const data = dipData[caseId];
            
            if (!overlay || !contentArea) {
                console.error('âŒ Dip overlay elements not found');
                console.log('Available elements:', {
                    overlay: !!overlay,
                    contentArea: !!contentArea
                });
                return;
            }
            
            if (data) {
                console.log('âœ… Case study data found, rendering...');
                contentArea.innerHTML = `
                    <h1 style="font-family: 'Courier New', monospace; color: var(--cyber-primary-accent); margin-bottom: 2rem; margin-right: 4rem; font-size: clamp(1.2rem, 2.5vw, 1.8rem); line-height: 1.2; white-space: pre-line;">${data.title}</h1>
                    ${data.content}
                `;
                overlay.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                
                // Reinitialize tooltips for new content
                setTimeout(() => {
                    initializeTooltips();
                    console.log('âœ… Case study modal opened successfully');
                }, 100);
            } else {
                console.error(`âŒ Case study data not found for: ${caseId}`);
                console.log('Available case studies:', Object.keys(dipData));
            }
        }
        
        function closeDip() {
            const overlay = document.getElementById('dip-overlay');
            if (overlay) {
                overlay.style.display = 'none';
                document.body.style.overflow = '';
                document.body.style.overflowX = 'hidden';
                console.log('âœ… Case study modal closed');
            }
        }
        
        // DIVE LAYER: Enhanced Game Launch System
        function launchSnake() {
            console.log('ğŸš« Inline snake launch disabled - use modal instead');
            return false;
        }
        
        function launchGraffiti() {
            console.log('ğŸš« Inline graffiti launch disabled - use modal instead');
            return false;
        }
        
        function launchSnakeOLD() {
            const gameContainer = document.getElementById('game-container');
            gameContainer.innerHTML = `
                <div class="dive-layer-game">
                    <div class="game-header">
                        <pre class="ascii-game-header">
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         ğŸ SNAKE: EXECUTIVE MODE                      â•‘
â•‘                      FRAMEWORK VALIDATION ACTIVE                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</pre>
                    </div>
                    
                    <div class="framework-display">
                        <div class="framework-column">
                            <h4 class="framework-title hoverable" data-tooltip="Jiu-jitsu principle: Precision timing creates flow state">FLOW STATE MECHANICS</h4>
                            <div class="framework-metrics">
                                <span class="metric-line hoverable" data-tooltip="Every move builds toward inevitable victory">â”œâ”€ Strategic Positioning</span>
                                <span class="metric-line hoverable" data-tooltip="Timing creates leverage opportunities">â”œâ”€ Precision Timing</span>
                                <span class="metric-line hoverable" data-tooltip="Growth requires calculated risk">â””â”€ Controlled Growth</span>
                            </div>
                        </div>
                        
                        <div class="framework-column">
                            <h4 class="framework-title hoverable" data-tooltip="Dark Matter: Invisible systems create visible results">DARK MATTER VALIDATION</h4>
                            <div class="framework-metrics">
                                <span class="metric-line hoverable" data-tooltip="Grid navigation teaches spatial thinking">â”œâ”€ Spatial Intelligence</span>
                                <span class="metric-line hoverable" data-tooltip="Resource management under pressure">â”œâ”€ Resource Optimization</span>
                                <span class="metric-line hoverable" data-tooltip="System constraints drive innovation">â””â”€ Constraint Leverage</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="game-launch-status">
                        <pre class="ascii-loading">
â”Œâ”€ EXECUTIVE PLAYGROUND STATUS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRAMEWORK SYSTEMS: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ INITIALIZED â”‚
â”‚ VALIDATION ENGINE: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ ACTIVE      â”‚
â”‚ FLOW STATE READY:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ STANDBY     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
                        <button class="dive-launch-btn hoverable" onclick="initializeSnakeGame()" data-tooltip="Begin executive validation through strategic play">
                            â–¶ INITIALIZE FRAMEWORK VALIDATION
                        </button>
                    </div>
                </div>
            `;
            
            gameContainer.scrollIntoView({ behavior: 'smooth' });
            
            // Re-initialize tooltips for new content
            setTimeout(initializeTooltips, 100);
        }
        
        function launchGraffiti() {
            const gameContainer = document.getElementById('game-container');
            gameContainer.innerHTML = `
                <div class="dive-layer-game">
                    <div class="game-header">
                        <pre class="ascii-game-header">
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      ğŸ’¥ SLAP: DISCOURSE MODE                         â•‘
â•‘                     LYRA SYSTEM VALIDATION ACTIVE                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</pre>
                    </div>
                    
                    <div class="framework-display">
                        <div class="framework-column">
                            <h4 class="framework-title hoverable" data-tooltip="Lyra: Multi-threaded discourse that scales wisdom">LYRA DISCOURSE SYSTEM</h4>
                            <div class="framework-metrics">
                                <span class="metric-line hoverable" data-tooltip="Individual expression strengthens collective intelligence">â”œâ”€ Multi-threaded Expression</span>
                                <span class="metric-line hoverable" data-tooltip="Creative tools feel like natural conversation">â”œâ”€ Intuitive Interaction</span>
                                <span class="metric-line hoverable" data-tooltip="Community wisdom emerges from individual creativity">â””â”€ Collective Intelligence</span>
                            </div>
                        </div>
                        
                        <div class="framework-column">
                            <h4 class="framework-title hoverable" data-tooltip="IntegrationOS: Technology disappears, experience emerges">INTEGRATIONOS TESTING</h4>
                            <div class="framework-metrics">
                                <span class="metric-line hoverable" data-tooltip="Creative expression validates system design">â”œâ”€ Expression Validation</span>
                                <span class="metric-line hoverable" data-tooltip="Community dynamics test scalability">â”œâ”€ Community Scaling</span>
                                <span class="metric-line hoverable" data-tooltip="Cultural creation through technical systems">â””â”€ Culture Technology</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="game-launch-status">
                        <h3 class="ascii-subtitle hoverable" data-tooltip="Framework thinking: Each component strengthens the whole through strategic positioning and leverage principles">
â”Œâ”€ STRATEGIC ARCHITECTURE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</h3>
                        <pre class="ascii-loading">
â”Œâ”€ DISCOURSE LABORATORY STATUS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LYRA DISCOURSE:    â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’ INITIALIZED â”‚
â”‚ COMMUNITY SYSTEM:  â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’ ACTIVE      â”‚
â”‚ EXPRESSION READY:  â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’ STANDBY     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
                        <button class="dive-launch-btn hoverable" onclick="initializeGraffitiGame()" data-tooltip="Begin discourse validation through creative expression">
                            â–¶ INITIALIZE DISCOURSE VALIDATION
                        </button>
                    </div>
                </div>
            `;
            
            gameContainer.scrollIntoView({ behavior: 'smooth' });
            
            // Re-initialize tooltips for new content
            setTimeout(initializeTooltips, 100);
        }
        
        function initializeSnakeGame() {
            // Trojan Horse Layer 3: Actual game implementation
            document.getElementById('game-container').innerHTML = `
                <div style="background: var(--cyber-dark-primary); border: 2px solid var(--cyber-primary-accent); border-radius: var(--cyber-radius-base); padding: 3rem; text-align: center;">
                    <h3 style="color: var(--cyber-primary-accent); font-family: 'Courier New', monospace; margin-bottom: 2rem;">ğŸ FRAMEWORK VALIDATION IN PROGRESS</h3>
                    <p style="color: var(--cyber-light-gray); margin-bottom: 2rem;">Executive playground active. Design principles validating through strategic play.</p>
                    <div style="color: var(--cyber-medium-gray); font-family: 'Courier New', monospace; line-height: 1.6;">
                        FLOW STATE: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ ACHIEVED<br>
                        PRECISION: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ VALIDATED<br>
                        LEVERAGE: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ CONFIRMED
                    </div>
                </div>
            `;
        }
        
        function initializeGraffitiGame() {
            // Trojan Horse Layer 3: Actual game implementation
            document.getElementById('game-container').innerHTML = `
                <div style="background: var(--cyber-dark-primary); border: 2px solid var(--cyber-primary-accent); border-radius: var(--cyber-radius-base); padding: 3rem; text-align: center;">
                    <h3 style="color: var(--cyber-primary-accent); font-family: 'Courier New', monospace; margin-bottom: 2rem;">ğŸ¨ DISCOURSE VALIDATION IN PROGRESS</h3>
                    <p style="color: var(--cyber-light-gray); margin-bottom: 2rem;">Lyra system active. Community dynamics validating through creative expression.</p>
                    <div style="color: var(--cyber-medium-gray); font-family: 'Courier New', monospace; line-height: 1.6;">
                        DISCOURSE: â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’ ACTIVE<br>
                        EXPRESSION: â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’ FLOWING<br>
                        COMMUNITY: â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’â–“â–‘â–’ SCALING
                    </div>
                </div>
            `;
        }
        
        function updateGameStats() {
            const gamesEl = document.getElementById('lab-count-games');
            if (gamesEl) {
                gamesEl.textContent = `(${gameStats.snakeGames})`;
            }
            const artEl = document.getElementById('lab-count-art');
            if (artEl) {
                artEl.textContent = `(${gameStats.artPieces})`;
            }
            const allEl = document.getElementById('lab-count-all');
            if (allEl) {
                allEl.textContent = `(${gameStats.snakeGames + gameStats.artPieces})`;
            }
            const playersEl = document.getElementById('active-players');
            if (playersEl) {
                playersEl.textContent = gameStats.activePlayers;
            }
        }
        
        // UNIVERSAL SEQUENCE SYSTEM - DISABLED GLITCH CORRUPTION
        let currentSequence = 1;
        let sequenceTimer = 0;
        
        function updateUniversalSequence() {
            const heroSection = document.getElementById('hero-section');
            if (!heroSection) return;
            
            // Cycle through sequences every 15 seconds
            sequenceTimer++;
            if (sequenceTimer >= 15) {
                currentSequence = (currentSequence % 4) + 1;
                sequenceTimer = 0;
                heroSection.className = heroSection.className.replace(/sequence-\d+/, '') + ` sequence-${currentSequence}`;
            }
        }

        // Smooth scroll navigation function
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId) || document.querySelector(`.${sectionId}`);
            if (element) {
                element.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }

        // Social sharing screenshot functionality
        function captureASCIIScreenshot() {
            const heroSection = document.getElementById('hero-section');
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size for social media (1200x630 for LinkedIn/Facebook)
            canvas.width = 1200;
            canvas.height = 630;
            
            // Fill background with theme-aware color
            const computedStyle = getComputedStyle(document.documentElement);
            ctx.fillStyle = computedStyle.getPropertyValue('--surface-primary').trim();
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Add ASCII art
            ctx.font = '24px Courier New';
            ctx.fillStyle = 'var(--cyber-primary-accent)';
            ctx.textAlign = 'center';
            
            const asciiText = document.getElementById('ascii-rr').textContent;
            const lines = asciiText.split('\n');
            const startY = 200;
            
            lines.forEach((line, index) => {
                ctx.fillText(line, canvas.width / 2, startY + (index * 30));
            });
            
            // Add tagline
            ctx.font = '18px Courier New';
            ctx.fillStyle = computedStyle.getPropertyValue('--text-secondary').trim();
            ctx.fillText('Executive Director: Flow, Leverage, Scale', canvas.width / 2, startY + (lines.length * 30) + 50);
            
            // Download image
            const link = document.createElement('a');
            link.download = 'ricrios-cyberpunk-portfolio-share.png';
            link.href = canvas.toDataURL();
            link.click();
        }
        
        // Keyboard navigation support
        document.addEventListener('keydown', (e) => {
            // ESC to close modals
            if (e.key === 'Escape') {
                const dipOverlay = document.getElementById('dip-overlay');
                const gameModals = document.querySelectorAll('.game-modal[style*="flex"]');
                
                if (dipOverlay && dipOverlay.style.display === 'flex') {
                    closeDip();
                } else if (gameModals.length > 0) {
                    gameModals.forEach(modal => closeModal(modal.id));
                }
            }
            
            // Arrow keys for navigation
            if (e.key === 'ArrowDown' && e.ctrlKey) {
                e.preventDefault();
                const sections = ['hero-section', 'case-studies-grid', 'playground-section'];
                const currentIndex = sections.findIndex(id => {
                    const element = document.getElementById(id);
                    return element && element.getBoundingClientRect().top >= 0;
                });
                const nextIndex = (currentIndex + 1) % sections.length;
                scrollToSection(sections[nextIndex]);
            }
            
            if (e.key === 'ArrowUp' && e.ctrlKey) {
                e.preventDefault();
                const sections = ['hero-section', 'case-studies-grid', 'playground-section'];
                const currentIndex = sections.findIndex(id => {
                    const element = document.getElementById(id);
                    return element && element.getBoundingClientRect().top >= 0;
                });
                const prevIndex = currentIndex > 0 ? currentIndex - 1 : sections.length - 1;
                scrollToSection(sections[prevIndex]);
            }
            
            // S key for screenshot
            if (e.key === 's' && e.ctrlKey && e.shiftKey) {
                e.preventDefault();
                captureASCIIScreenshot();
            }
        });

        // ENGINEERED TOOLTIP SYSTEM - SINGLE SOURCE OF TRUTH
        let activeTooltip = null;
        
        function createTooltip(text) {
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            tooltip.textContent = text;
            document.body.appendChild(tooltip);
            return tooltip;
        }
        
        function positionTooltip(tooltip, targetRect) {
            const tooltipRect = tooltip.getBoundingClientRect();
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            
            // Calculate optimal position
            let left = targetRect.left + (targetRect.width / 2) - (tooltipRect.width / 2);
            let top = targetRect.top - tooltipRect.height - 12;
            
            // Viewport constraints
            if (left < 8) left = 8;
            if (left + tooltipRect.width > viewportWidth - 8) {
                left = viewportWidth - tooltipRect.width - 8;
            }
            if (top < 8) {
                top = targetRect.bottom + 12;
            }
            
            tooltip.style.left = left + 'px';
            tooltip.style.top = top + 'px';
        }
        
        function showTooltip(e) {
            if (activeTooltip) hideTooltip();
            
            const element = e.target || e.currentTarget;
            if (!element || !element.getAttribute) return;
            
            const text = element.getAttribute('data-tooltip');
            if (!text) return;
            
            activeTooltip = createTooltip(text);
            const rect = element.getBoundingClientRect();
            positionTooltip(activeTooltip, rect);
            
            // Trigger reflow and show
            activeTooltip.offsetHeight;
            activeTooltip.style.opacity = '1';
            activeTooltip.style.visibility = 'visible';
        }
        
        function hideTooltip() {
            if (activeTooltip && activeTooltip.parentNode) {
                activeTooltip.style.opacity = '0';
                setTimeout(() => {
                    if (activeTooltip && activeTooltip.parentNode) {
                        activeTooltip.style.visibility = 'hidden';
                        setTimeout(() => {
                            if (activeTooltip && activeTooltip.parentNode) {
                                activeTooltip.remove();
                                activeTooltip = null;
                            }
                        }, 100);
                    }
                }, 100);
            }
        }

        // Initialize all tooltips
        function initializeTooltips() {
            const tooltipTriggers = document.querySelectorAll('[data-tooltip]');
            tooltipTriggers.forEach(trigger => {
                // Remove existing listeners to prevent duplicates
                trigger.removeEventListener('mouseenter', showTooltip);
                trigger.removeEventListener('mouseleave', hideTooltip);
                
                // Add fresh listeners
                trigger.addEventListener('mouseenter', showTooltip);
                trigger.addEventListener('mouseleave', hideTooltip);
            });
        }

        // LEGACY GAME MODAL SYSTEM - REMOVED TO PREVENT CONFLICTS
        // This duplicate function was causing modal launch failures

        // Snake Game Implementation
        let snakeGame = null;

        // LEGACY FUNCTION - DISABLED  
        function initSnakeGame() {
            console.log('ğŸš« Legacy initSnakeGame disabled - using unified system');
            return;
            let food = {x: 15, y: 15, type: 'normal'};
            let direction = 'RIGHT';
            let score = 0;
            let gameState = 'idle'; // idle, playing, paused, gameOver
            let gameLoop = null;
            let baseSpeed = 150;
            let currentSpeed = baseSpeed;
            let boostMode = false;
            
            // Food types with different mechanics
            const foodTypes = {
                normal: { emoji: 'ğŸ', points: 10, color: 'var(--cyber-warning)' },
                power: { emoji: 'âš¡', points: 25, color: 'var(--cyber-secondary-accent)' },
                golden: { emoji: 'ğŸ†', points: 50, color: 'var(--cyber-tertiary-accent)' },
                toxic: { emoji: 'â˜ ï¸', points: -5, color: 'var(--cyber-secondary-accent)' },
                speed: { emoji: 'ğŸš€', points: 15, color: 'var(--cyber-tertiary-accent)' }
            };
            
            const board = document.getElementById('snake-board');
            const scoreElement = document.getElementById('snake-score');
            const startButton = document.getElementById('snake-start');
            
            if (!board) {
                console.error('âŒ Snake board element not found');
                return;
            }
            if (!scoreElement) {
                console.error('âŒ Snake score element not found');
                return;
            }
            if (!startButton) {
                console.error('âŒ Snake start button not found');
                return;
            }
            
            // Create game board with mobile responsiveness
            const boardSize = Math.min(400, window.innerWidth - 100);
            board.style.cssText = `
                display: grid;
                grid-template-columns: repeat(${GRID_SIZE}, 1fr);
                grid-template-rows: repeat(${GRID_SIZE}, 1fr);
                width: ${boardSize}px;
                height: ${boardSize}px;
                border: 2px solid var(--cyber-primary-accent);
                background: var(--surface-secondary);
            `;
            
            // Clear existing board content and reset
            board.innerHTML = '';
            board.style.pointerEvents = 'auto';
            
            // Create grid cells
            for (let i = 0; i < GRID_SIZE * GRID_SIZE; i++) {
                const cell = document.createElement('div');
                cell.className = 'snake-cell';
                cell.style.cssText = `
                    border: 1px solid var(--cyber-dark-tertiary);
                    background: transparent;
                `;
                gameBoard.appendChild(cell);
            }
            
    function updateBoard() {
        return; // Disabled to prevent conflicts
    }
                
    function moveSnake() {
        return; // Disabled to prevent conflicts
    }
    
    function generateFood() {
        return; // Disabled to prevent conflicts
    }
    
    function gameOver() {
        return; // Disabled to prevent conflicts
    }
    
    function getFoodType() {
        return; // Disabled to prevent conflicts
    }
            
            // Legacy snake code removed - using ImmersiveSnakeGame.js instead
            
            // All legacy snake functions disabled - using ImmersiveSnakeGame.js
        }

        // CONSOLIDATED INITIALIZATION
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ Initializing Cyberpunk Portfolio...');
            
            runTask(() => {
                document.querySelectorAll('.game-modal, .dip-overlay').forEach(modal => {
                    modal.style.display = 'none';
                });
                document.body.style.overflow = 'auto';
            }, 'resetModals');
            
            // Initialize all systems
            runTask(updateArtCount, 'updateArtCount');
            runTask(applyTimeAwareThemes, 'applyTimeAwareThemes');
            runTask(initHeroMonogram, 'initHeroMonogram');
            runTask(initMicroInteractions, 'initMicroInteractions');
            runTask(initializeTooltips, 'initializeTooltips');
            runTask(updateTimeStatus, 'updateTimeStatus');
            runTask(initDiagnosticsPanel, 'initDiagnosticsPanel');
            runTask(startFPSCounter, 'startFPSCounter');
            runTask(initNavigationTracker, 'initNavigationTracker');
            runTask(initLabFilters, 'initLabFilters');
            runTask(updateGameStats, 'updateGameStats');
            runTask(bindGameCardActions, 'bindGameCardActions');
            runTask(initCommunityWallMenu, 'initCommunityWallMenu');
            runTask(initAutoOpenDetails, 'initAutoOpenDetails');
            runTask(() => labLogConsole.init(), 'initLabLogConsole');
            
            // Start intervals
            setInterval(updateTimeStatus, 1000);
            setInterval(updateUniversalSequence, 1000);
            
            // Modular Glitch Variance System
            function initGlitchSystem() {
                const glitchElements = document.querySelectorAll('.ascii-monogram, .case-card');
                
                // Dynamic glitch intensity based on time of day
                function updateGlitchIntensity() {
                    const hour = new Date().getHours();
                    let intensity, speed, offset;
                    
                    if (hour >= 6 && hour < 12) { // Morning
                        intensity = 0.2;
                        speed = '3s';
                        offset = '1px';
                    } else if (hour >= 12 && hour < 18) { // Afternoon
                        intensity = 0.4;
                        speed = '2s';
                        offset = '2px';
                    } else if (hour >= 18 && hour < 22) { // Evening
                        intensity = 0.6;
                        speed = '1.5s';
                        offset = '3px';
                    } else { // Night
                        intensity = 0.8;
                        speed = '1s';
                        offset = '4px';
                    }
                    
                    document.documentElement.style.setProperty('--glitch-intensity', intensity);
                    document.documentElement.style.setProperty('--glitch-speed', speed);
                    document.documentElement.style.setProperty('--glitch-offset', offset);
                }
                
                updateGlitchIntensity();
                setInterval(updateGlitchIntensity, 60000); // Update every minute
                
                glitchElements.forEach(element => {
                    // Clear any stuck glitch classes on initialization
                    element.classList.remove('glitch-active', 'glitch-hover');
                    
                    element.addEventListener('mouseenter', () => {
                        if (element.classList.contains('ascii-monogram')) {
                            element.classList.add('glitch-active');
                        } else if (element.classList.contains('case-card')) {
                            element.classList.add('glitch-hover');
                        }
                    });
                    
                    element.addEventListener('mouseleave', () => {
                        element.classList.remove('glitch-active', 'glitch-hover');
                    });
                    
                    element.addEventListener('animationend', () => {
                        element.classList.remove('glitch-hover');
                    });
                });
            }

            // Performance optimization - asset lazy loading
            function initLazyLoading() {
                // Lazy load images with Intersection Observer
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src;
                            img.classList.remove('lazy');
                            observer.unobserve(img);
                        }
                    });
                }, {
                    rootMargin: '50px 0px',
                    threshold: 0.01
                });
                
                document.querySelectorAll('img[data-src]').forEach(img => {
                    imageObserver.observe(img);
                });
                
                // Preload critical game assets
                const preloadAssets = () => {
                    const criticalAssets = [
                        // Add any critical images or resources here
                    ];
                    
                    criticalAssets.forEach(asset => {
                        const link = document.createElement('link');
                        link.rel = 'preload';
                        link.as = 'image';
                        link.href = asset;
                        document.head.appendChild(link);
                    });
                };
                
                // Performance monitoring
                const performanceMonitor = {
                    startTime: performance.now(),
                    
                    logMetric: (name, value) => {
                        console.log(`Performance: ${name} = ${Math.round(value)}ms`);
                    },
                    
                    measureInteraction: (element, eventType) => {
                        element.addEventListener(eventType, () => {
                            const interactionTime = performance.now() - performanceMonitor.startTime;
                            performanceMonitor.logMetric(`${eventType}_interaction`, interactionTime);
                        });
                    }
                };
                
                // Monitor critical interactions
                document.querySelectorAll('.case-card, .game-card').forEach(card => {
                    performanceMonitor.measureInteraction(card, 'click');
                });
                
                preloadAssets();
                return performanceMonitor;
            }

            // Cinematic hero glitch on load
            function triggerHeroGlitch() {
                const asciiMonogram = document.getElementById('ascii-rr');
                if (asciiMonogram) {
                    asciiMonogram.classList.add('glitch-load');
                    
                    // Remove class after animation completes
                    setTimeout(() => {
                        asciiMonogram.classList.remove('glitch-load');
                    }, 3000);
                }
            }

            // Initialize everything when DOM is ready
            initThemeToggle();
            initGlitchSystem();
            initLazyLoading();
            initializeTooltips();
            
            // Trigger cinematic hero glitch after short delay
            setTimeout(triggerHeroGlitch, 500);
            
            console.log('Innovation Lab initialized successfully');
            
            const heroSection = document.getElementById('hero-section');
            if (heroSection) {
                heroSection.classList.add('sequence-1');
            }
            
            // Achievement integration
            if (window.cyberpunkSnakeGame) {
                window.cyberpunkSnakeGame.setAchievementCallback((achievement) => {
                    console.log('ğŸ† Design Achievement:', achievement.title);
                });
            }
            
            console.log('âœ… Cyberpunk Portfolio: All systems initialized');
        }); // FIXED: Added missing closing brace for DOMContentLoaded

        const THEME_STORAGE_KEY = 'theme-preference';
        let themeMediaListenerAttached = false;

        function applyThemePreference(theme, { persist = true, animate = false } = {}) {
            const nextTheme = theme === 'light' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', nextTheme);
            document.body.setAttribute('data-theme', nextTheme);

            if (persist) {
                try {
                    localStorage.setItem(THEME_STORAGE_KEY, nextTheme);
                } catch (error) {
                    console.warn('Unable to persist theme preference', error);
                }
            }

            if (window.timeAwarePalette?.apply) {
                window.timeAwarePalette.apply(nextTheme);
            }

            updateThemeToggleUI(nextTheme, animate);
            document.dispatchEvent(new CustomEvent('themechange', { detail: { theme: nextTheme } }));
            labLogConsole.log(`Theme locked to ${nextTheme}.`, 'theme');
        }

        function updateThemeToggleUI(theme, animate) {
            const themeIcon = document.querySelector('.theme-icon');
            const label = document.getElementById('theme-state-label');
            const toggleButton = document.getElementById('theme-toggle');
            const glyph = theme === 'light' ? 'â—‘' : 'â—';
            if (themeIcon && themeIcon.textContent !== glyph) {
                themeIcon.textContent = glyph;
            }
            if (label) {
                label.textContent = theme === 'light' ? 'Light' : 'Dark';
            }
            if (toggleButton) {
                toggleButton.setAttribute('aria-pressed', theme === 'light' ? 'true' : 'false');
            }
            if (animate && themeIcon) {
                themeIcon.classList.add('theme-icon-spin');
                setTimeout(() => themeIcon.classList.remove('theme-icon-spin'), 300);
            }
        }

        function toggleTheme() {
            const currentTheme = document.body.getAttribute('data-theme') ||
                document.documentElement.getAttribute('data-theme') ||
                'dark';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            applyThemePreference(newTheme, { persist: true, animate: true });
            console.log(`ğŸ¨ Theme switched to: ${newTheme}`);
        }

        function initThemeToggle() {
            const storedTheme = (() => {
                try {
                    return localStorage.getItem(THEME_STORAGE_KEY);
                } catch (error) {
                    console.warn('Unable to read theme preference', error);
                    return null;
                }
            })();

            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            const initialTheme = storedTheme || (prefersDark ? 'dark' : 'light');
            applyThemePreference(initialTheme, { persist: !!storedTheme });

            if (!themeMediaListenerAttached && window.matchMedia) {
                const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
                const syncSystemTheme = (event) => {
                    const hasExplicitPreference = (() => {
                        try {
                            return !!localStorage.getItem(THEME_STORAGE_KEY);
                        } catch {
                            return false;
                        }
                    })();

                    if (!hasExplicitPreference) {
                        applyThemePreference(event.matches ? 'dark' : 'light', { persist: false });
                    }
                };

                if (typeof mediaQuery.addEventListener === 'function') {
                    mediaQuery.addEventListener('change', syncSystemTheme);
                } else if (typeof mediaQuery.addListener === 'function') {
                    mediaQuery.addListener(syncSystemTheme);
                }

                themeMediaListenerAttached = true;
            }
        }

        // Escape key to close dip layer
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeDip();
            }
        });
    </script>

    <!-- Immersive Games -->
    <script src="js/immersive/ImmersiveSlapGame.js"></script>
    <script src="js/core/CyberGameEngine.js"></script>
    <script src="js/games/CyberSnakeGame.js"></script>
    
    <!-- Game Modal System -->
    <script src="js/unified/GameModalSystem.js"></script>
    
    <!-- Triple Validation Script -->
    <script src="js/validators/theme-sync-validator.js" defer></script>
    <script src="js/core/GlobalErrorHandler.js" defer></script>
    <script src="js/utils/WebPConverter.js" defer></script>
    <script src="js/validators/AccessibilityValidator.js" defer></script>
    <script src="js/utils/time-aware-palette.js" defer></script>
    <script src="js/features/slap-canvas.js" defer></script>
    
    <!-- Modular Game Architecture - Load in dependency order -->
    <script src="js/core/BaseGameEngine.js" defer></script>
    <script src="js/core/UnifiedModalSystem.js" defer></script>
    <script src="js/core/UnifiedHUDSystem.js" defer></script>
    <script src="js/core/GameLoader.js" defer></script>
    <script src="js/core/SocialShareSystem.js" defer></script>
    <script src="js/core/SnakeGameEngine.js" defer></script>
    <script src="js/core/SlapGameEngine.js" defer></script>

    <!-- Immersive Game Launchers -->
    <script>
        let activeImmersiveGame = null;

        function destroyActiveGameInstance() {
            if (!activeImmersiveGame) {
                window.activeImmersiveGame = null;
                return;
            }
            if (typeof activeImmersiveGame.destroy === 'function') {
                activeImmersiveGame.destroy();
            } else if (typeof activeImmersiveGame.close === 'function') {
                activeImmersiveGame.close();
            }
            activeImmersiveGame = null;
            window.activeImmersiveGame = null;
        }

        function teardownImmersiveGame() {
            destroyActiveGameInstance();
            window.activeImmersiveGame = null;
            ['immersive-snake-container', 'immersive-slap-container'].forEach(id => {
                const node = document.getElementById(id);
                if (node) {
                    node.remove();
                }
            });
            window.currentSnakeGame = null;
            window.currentSlapGame = null;
            document.body.style.overflow = '';
        }

        function buildSnakeOverlayMarkup() {
            return `
                <div class="immersive-game-overlay" data-snake-root>
                    <button class="immersive-game-close" id="immersive-snake-close" aria-label="Close Snake Game">âœ•</button>
                    <div class="immersive-game-shell">
                        <div class="snake-header" style="display: flex; flex-direction: column; gap: 1rem;">
                            <div class="game-stats refined-stats" role="status" aria-live="polite" style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 1rem;">
                                <div class="stat-item" style="text-align: center;">
                                    <span class="stat-label" style="display: block; font-size: 0.8rem; color: #888;">SCORE</span>
                                    <span class="stat-value" data-snake-score aria-label="Current score" style="display: block; font-size: 1.5rem; font-weight: bold; color: var(--cyber-primary);">0</span>
                                </div>
                                <div class="stat-item" style="text-align: center;">
                                    <span class="stat-label" style="display: block; font-size: 0.8rem; color: #888;">LEVEL</span>
                                    <span class="stat-value" data-snake-level aria-label="Current level" style="display: block; font-size: 1.5rem; font-weight: bold; color: var(--cyber-secondary);">1</span>
                                </div>
                                <div class="stat-item" style="text-align: center;">
                                    <span class="stat-label" style="display: block; font-size: 0.8rem; color: #888;">STATUS</span>
                                    <span class="stat-value" data-snake-status aria-label="Game status" style="display: block; font-size: 1.2rem; font-weight: bold; color: var(--cyber-warning);">READY</span>
                                </div>
                                <div class="stat-item" style="text-align: center;">
                                    <span class="stat-label" style="display: block; font-size: 0.8rem; color: #888;">HIGH SCORE</span>
                                    <span class="stat-value" data-snake-high-score aria-label="Highest score" style="display: block; font-size: 1.5rem; font-weight: bold; color: var(--cyber-tertiary-accent);">0</span>
                                </div>
                            </div>
                            <button data-snake-start class="game-btn primary-action" aria-label="Start Snake Game" style="padding: 0.75rem 1.5rem; font-size: 1rem; background: var(--cyber-primary); color: #000; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">ğŸ START RUN</button>
                        </div>
                        <div class="snake-leaderboard" data-snake-leaderboard>
                            <h4>Arcade Leaderboard</h4>
                            <p class="snake-leaderboard-empty">Play a run to log your first score.</p>
                        </div>
                        <div class="snake-game-area" style="min-height: 320px; display: flex; justify-content: center; align-items: center;">
                            <div class="game-board refined-board" id="immersive-snake-board" role="application" aria-label="Snake Game Board" style="width: min(60vh, 90vw); height: min(60vh, 90vw); max-width: 520px; max-height: 520px; border: 2px solid var(--cyber-primary); background: rgba(0, 0, 0, 0.85); border-radius: 8px;"></div>
                        </div>
                    </div>
                </div>
            `;
        }

        function buildSlapOverlayMarkup() {
            return `
                <div class="immersive-game-overlay" data-slap-root>
                    <button class="immersive-game-close" id="immersive-slap-close" aria-label="Close SLAP Game">âœ•</button>
                    <div class="immersive-game-shell slap-shell">
                        <div class="slap-overlay-header">
                            <div>
                                <div class="overlay-label">ASCII GRAFFITI OPS</div>
                                <h3>Leave Your SLAP</h3>
                                <p>Draw bold ASCII stickers, slap them to the wall, and share the encoded tag so other operators can amplify your mark.</p>
                            </div>
                            <div class="overlay-actions">
                                <span>Tap / drag to draw</span>
                                <span>Space: Slap â€¢ Z: Undo â€¢ C: Clear</span>
                            </div>
                        </div>
                        <div id="immersive-slap-root" class="immersive-slap-root"></div>
                    </div>
                </div>
            `;
        }

        function launchImmersiveSnake() {
            console.log('ğŸ Launching Immersive Snake Game');
            
            destroyActiveGameInstance();
            
            let container = document.getElementById('immersive-snake-container');
            if (container) {
                container.remove();
            }
            container = document.createElement('div');
            container.id = 'immersive-snake-container';
            container.innerHTML = buildSnakeOverlayMarkup();
            document.body.appendChild(container);
            document.body.style.overflow = 'hidden';

            const closeBtn = document.getElementById('immersive-snake-close');
            closeBtn?.addEventListener('click', teardownImmersiveGame);

            try {
                activeImmersiveGame = new CyberSnakeGame('immersive-snake-board');
                window.activeImmersiveGame = activeImmersiveGame;
                window.currentSnakeGame = activeImmersiveGame;
                console.log('âœ… CyberSnakeGame launched successfully');
            } catch (error) {
                console.error('âŒ Failed to launch Immersive Snake Game:', error);
                teardownImmersiveGame();
            }
        }

        function launchImmersiveSlap() {
            console.log('ğŸ¨ Launching Immersive SLAP Creator');
            
            destroyActiveGameInstance();
            
            let container = document.getElementById('immersive-slap-container');
            if (container) {
                container.remove();
            }
            container = document.createElement('div');
            container.id = 'immersive-slap-container';
            container.innerHTML = buildSlapOverlayMarkup();
            document.body.appendChild(container);
            document.body.style.overflow = 'hidden';

            const closeBtn = document.getElementById('immersive-slap-close');
            closeBtn?.addEventListener('click', teardownImmersiveGame);

            try {
                activeImmersiveGame = new ImmersiveSlapGame('immersive-slap-root');
                window.activeImmersiveGame = activeImmersiveGame;
                window.currentSlapGame = activeImmersiveGame;
                
                if (typeof activeImmersiveGame.close === 'function') {
                    const originalClose = activeImmersiveGame.close.bind(activeImmersiveGame);
                    activeImmersiveGame.close = () => {
                        originalClose();
                        teardownImmersiveGame();
                    };
                }

                console.log('âœ… Immersive SLAP Creator launched successfully');
            } catch (error) {
                console.error('âŒ Failed to launch Immersive SLAP Creator:', error);
                teardownImmersiveGame();
            }
        }

        // Global escape key handler for immersive games
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Escape' && activeImmersiveGame) {
                teardownImmersiveGame();
            }
        });

        // Mobile Touch Controls for Snake Game
        function setupSnakeTouchControls() {
            const touchButtons = {
                'snake-up': () => {
                    console.log('ğŸ® Snake UP triggered');
                    if (window.currentSnakeGame && window.currentSnakeGame.setDirection) {
                        window.currentSnakeGame.setDirection({ x: 0, y: -1 });
                    } else {
                        console.log('âš ï¸ Snake game not ready or method missing');
                    }
                },
                'snake-down': () => {
                    console.log('ğŸ® Snake DOWN triggered');
                    if (window.currentSnakeGame && window.currentSnakeGame.setDirection) {
                        window.currentSnakeGame.setDirection({ x: 0, y: 1 });
                    } else {
                        console.log('âš ï¸ Snake game not ready or method missing');
                    }
                },
                'snake-left': () => {
                    console.log('ğŸ® Snake LEFT triggered');
                    if (window.currentSnakeGame && window.currentSnakeGame.setDirection) {
                        window.currentSnakeGame.setDirection({ x: -1, y: 0 });
                    } else {
                        console.log('âš ï¸ Snake game not ready or method missing');
                    }
                },
                'snake-right': () => {
                    console.log('ğŸ® Snake RIGHT triggered');
                    if (window.currentSnakeGame && window.currentSnakeGame.setDirection) {
                        window.currentSnakeGame.setDirection({ x: 1, y: 0 });
                    } else {
                        console.log('âš ï¸ Snake game not ready or method missing');
                    }
                },
                'snake-boost': () => {
                    console.log('ğŸ® Snake BOOST triggered');
                    if (window.currentSnakeGame && window.currentSnakeGame.activateBoost) {
                        window.currentSnakeGame.activateBoost();
                    } else {
                        console.log('âš ï¸ Snake game not ready or boost method missing');
                    }
                }
            };

            // Remove existing listeners first
            Object.keys(touchButtons).forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    btn.replaceWith(btn.cloneNode(true));
                }
            });

            // Add fresh listeners
            Object.entries(touchButtons).forEach(([id, handler]) => {
                const btn = document.getElementById(id);
                if (btn) {
                    console.log(`ğŸ® Setting up touch control for: ${id}`);
                    
                    // Multiple event types for maximum compatibility
                    ['touchstart', 'mousedown', 'click'].forEach(eventType => {
                        btn.addEventListener(eventType, (e) => {
                            e.preventDefault();
                            e.stopPropagation();
                            console.log(`ğŸ® ${eventType} triggered on ${id}`);
                            handler();
                            btn.style.transform = 'scale(0.9)';
                            setTimeout(() => btn.style.transform = 'scale(1)', 150);
                        }, { passive: false });
                    });
                }
            });
        }

        function simulateKeyPress(code) {
            console.log(`ğŸ® Simulating key press: ${code}`);
            const event = new KeyboardEvent('keydown', {
                code: code,
                key: code.replace('Arrow', '').replace('Left', ''),
                bubbles: true,
                cancelable: true
            });
            document.dispatchEvent(event);
            
            // Also try dispatching to the game board directly
            const gameBoard = document.getElementById('snake-board');
            if (gameBoard) {
                gameBoard.dispatchEvent(event);
            }
            
            // Try dispatching to window for global capture
            window.dispatchEvent(event);
        }

        // Initialize touch controls when Snake modal opens
        document.addEventListener('DOMContentLoaded', () => {
            setupSnakeTouchControls();
        });

        // Re-setup touch controls when Snake modal is opened
        function reinitializeSnakeTouchControls() {
            setTimeout(() => {
                setupSnakeTouchControls();
                console.log('ğŸ® Snake touch controls reinitialized');
            }, 100);
        }

        // Hook into Snake modal opening and set global reference
        const snakeEngineNames = ['ImmersiveSnakeGame', 'SnakeGameEngine', 'CyberSnakeGame'];

        const originalOpenGameModal = window.openGameModal;
        if (typeof originalOpenGameModal === 'function') {
            window.openGameModal = function(modalId) {
                originalOpenGameModal(modalId);
                if (modalId === 'snake-modal') {
                    // Set global reference for touch controls
                    setTimeout(() => {
                        const modalGame = window.unifiedGameModalSystem?.activeGames?.get('snake-modal');
                        if (modalGame) {
                            window.currentSnakeGame = modalGame;
                        } else if (window.activeImmersiveGame && snakeEngineNames.includes(window.activeImmersiveGame.constructor.name)) {
                            window.currentSnakeGame = window.activeImmersiveGame;
                        }
                        reinitializeSnakeTouchControls();
                    }, 200);
                }
            };
        }

        // CSS for mobile touch controls - HIGH SPECIFICITY
        const mobileStyles = document.createElement('style');
        mobileStyles.textContent = `
            .mobile-touch-controls {
                display: none;
                flex-direction: column;
                align-items: center;
                gap: 15px;
                margin: 20px 0;
                padding: 20px;
                background: rgba(0, 255, 157, 0.05);
                border: 1px solid rgba(0, 255, 157, 0.2);
                border-radius: 12px;
            }
            
            .touch-instructions {
                color: #00ff9d;
                font-size: 14px;
                font-weight: bold;
                text-align: center;
                margin-bottom: 10px;
            }
            
            .touch-grid {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 12px;
            }
            
            .touch-btn {
                width: 60px;
                height: 60px;
                border: 2px solid #00ff9d;
                background: rgba(0, 255, 157, 0.1);
                color: #00ff9d;
                border-radius: 12px;
                font-size: 20px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.2s ease;
                user-select: none;
                -webkit-user-select: none;
                -webkit-tap-highlight-color: transparent;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .touch-btn.boost-btn {
                width: 120px;
                font-size: 16px;
            }
            
            .touch-btn:hover,
            .touch-btn:active {
                background: rgba(0, 255, 157, 0.3);
                transform: scale(0.95);
                box-shadow: 0 0 20px rgba(0, 255, 157, 0.6);
            }
            
            .touch-row {
                display: flex;
                gap: 15px;
                justify-content: center;
                align-items: center;
            }
            
            /* CRITICAL: Force mobile touch controls to show */
            @media (max-width: 768px), (pointer: coarse) {
                .mobile-touch-controls {
                    display: flex !important;
                }
                .control-keys.refined-keys {
                    display: none !important;
                }
                .game-modal-body {
                    overflow-y: auto !important;
                    -webkit-overflow-scrolling: touch !important;
                }
            }
            
            /* CRITICAL: Snake touch controls visibility fix */
            .snake-controls-area {
                display: flex !important;
                visibility: visible !important;
            }
            
            #snake-touch-controls {
                display: flex !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
            
            .touch-controls.mobile-touch-controls {
                display: flex !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
            
            /* Force touch buttons to be visible */
            .touch-btn {
                display: flex !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
        `;
        document.head.appendChild(mobileStyles);
    </script>
</body>
</html>
